<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kamal Romero">
<meta name="dcterms.date" content="2024-05-06">

<title>Input -Output with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="IntroR_files/libs/clipboard/clipboard.min.js"></script>
<script src="IntroR_files/libs/quarto-html/quarto.js"></script>
<script src="IntroR_files/libs/quarto-html/popper.min.js"></script>
<script src="IntroR_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="IntroR_files/libs/quarto-html/anchor.min.js"></script>
<link href="IntroR_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="IntroR_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="IntroR_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="IntroR_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="IntroR_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#r-programming-language-a-very-brief-introduction" id="toc-r-programming-language-a-very-brief-introduction" class="nav-link active" data-scroll-target="#r-programming-language-a-very-brief-introduction">R programming language: A (very) brief introduction</a>
  <ul class="collapse">
  <li><a href="#what-is-r" id="toc-what-is-r" class="nav-link" data-scroll-target="#what-is-r">What Is R?</a></li>
  <li><a href="#strengths-of-r" id="toc-strengths-of-r" class="nav-link" data-scroll-target="#strengths-of-r">Strengths of R</a></li>
  <li><a href="#working-environment" id="toc-working-environment" class="nav-link" data-scroll-target="#working-environment">Working environment</a></li>
  <li><a href="#r-vs-rstudio" id="toc-r-vs-rstudio" class="nav-link" data-scroll-target="#r-vs-rstudio">R vs RStudio</a></li>
  <li><a href="#alternatives" id="toc-alternatives" class="nav-link" data-scroll-target="#alternatives">Alternatives</a></li>
  <li><a href="#highlights-of-rstudio" id="toc-highlights-of-rstudio" class="nav-link" data-scroll-target="#highlights-of-rstudio">Highlights of RStudio</a></li>
  <li><a href="#projects-directories-and-libraries-organising-the-working-environment" id="toc-projects-directories-and-libraries-organising-the-working-environment" class="nav-link" data-scroll-target="#projects-directories-and-libraries-organising-the-working-environment">Projects, directories and libraries: Organising the working environment</a></li>
  <li><a href="#basic-functioning" id="toc-basic-functioning" class="nav-link" data-scroll-target="#basic-functioning">Basic functioning</a>
  <ul class="collapse">
  <li><a href="#arithmetic-operations" id="toc-arithmetic-operations" class="nav-link" data-scroll-target="#arithmetic-operations">Arithmetic operations</a></li>
  <li><a href="#assigning-variables" id="toc-assigning-variables" class="nav-link" data-scroll-target="#assigning-variables">Assigning variables</a></li>
  <li><a href="#introduce-comments" id="toc-introduce-comments" class="nav-link" data-scroll-target="#introduce-comments">Introduce comments</a></li>
  <li><a href="#errors" id="toc-errors" class="nav-link" data-scroll-target="#errors">Errors</a></li>
  </ul></li>
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries">Libraries</a></li>
  <li><a href="#basic-types-in-r-data-types" id="toc-basic-types-in-r-data-types" class="nav-link" data-scroll-target="#basic-types-in-r-data-types">Basic types in R (Data Types)</a>
  <ul class="collapse">
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  </ul></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data Frames</a>
  <ul class="collapse">
  <li><a href="#inspecting-the-data" id="toc-inspecting-the-data" class="nav-link" data-scroll-target="#inspecting-the-data">Inspecting the data</a></li>
  </ul></li>
  <li><a href="#read-and-write-data-in-r" id="toc-read-and-write-data-in-r" class="nav-link" data-scroll-target="#read-and-write-data-in-r">Read and write data in R</a>
  <ul class="collapse">
  <li><a href="#reading-data-in-r" id="toc-reading-data-in-r" class="nav-link" data-scroll-target="#reading-data-in-r">Reading data in R</a></li>
  <li><a href="#writing-data-in-r" id="toc-writing-data-in-r" class="nav-link" data-scroll-target="#writing-data-in-r">Writing data in R</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#más-allá-de-los-data-frames" id="toc-más-allá-de-los-data-frames" class="nav-link" data-scroll-target="#más-allá-de-los-data-frames">Más allá de los data frames</a>
  <ul class="collapse">
  <li><a href="#el-universo-tidyverse" id="toc-el-universo-tidyverse" class="nav-link" data-scroll-target="#el-universo-tidyverse">El universo Tidyverse</a>
  <ul class="collapse">
  <li><a href="#dplyr" id="toc-dplyr" class="nav-link" data-scroll-target="#dplyr">Dplyr</a></li>
  <li><a href="#más-allá-de-los-tibbles-joins" id="toc-más-allá-de-los-tibbles-joins" class="nav-link" data-scroll-target="#más-allá-de-los-tibbles-joins">Más allá de los tibbles: joins</a></li>
  </ul></li>
  <li><a href="#data.table-the-need-for-speed" id="toc-data.table-the-need-for-speed" class="nav-link" data-scroll-target="#data.table-the-need-for-speed">data.table: The need for speed</a></li>
  </ul></li>
  <li><a href="#introduction-to-data-visualization-in-r-with-ggplot2" id="toc-introduction-to-data-visualization-in-r-with-ggplot2" class="nav-link" data-scroll-target="#introduction-to-data-visualization-in-r-with-ggplot2">Introduction to Data Visualization in R with <code>ggplot2</code></a>
  <ul class="collapse">
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers">Layers</a></li>
  <li><a href="#data-and-aesthetics" id="toc-data-and-aesthetics" class="nav-link" data-scroll-target="#data-and-aesthetics">Data and aesthetics</a></li>
  <li><a href="#geometries" id="toc-geometries" class="nav-link" data-scroll-target="#geometries">Geometries</a></li>
  <li><a href="#facets" id="toc-facets" class="nav-link" data-scroll-target="#facets">Facets</a></li>
  <li><a href="#statistics" id="toc-statistics" class="nav-link" data-scroll-target="#statistics">Statistics</a></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes">Themes</a></li>
  </ul></li>
  <li><a href="#una-extremadamente-breve-introducción-a-la-modelización-en-r" id="toc-una-extremadamente-breve-introducción-a-la-modelización-en-r" class="nav-link" data-scroll-target="#una-extremadamente-breve-introducción-a-la-modelización-en-r">Una (extremadamente) breve introducción a la modelización en R</a>
  <ul class="collapse">
  <li><a href="#modelos-lineales-regresión-lineal" id="toc-modelos-lineales-regresión-lineal" class="nav-link" data-scroll-target="#modelos-lineales-regresión-lineal">Modelos lineales (regresión lineal)</a></li>
  <li><a href="#regresión-logística" id="toc-regresión-logística" class="nav-link" data-scroll-target="#regresión-logística">Regresión logística</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Input -Output with R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kamal Romero </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="r-programming-language-a-very-brief-introduction" class="level1">
<h1>R programming language: A (very) brief introduction</h1>
<section id="what-is-r" class="level2">
<h2 class="anchored" data-anchor-id="what-is-r">What Is R?</h2>
<p>The following definition is from the book <a href="https://www.oreilly.com/library/view/learning-r/9781449357160/">Learning R de Richard Cotton</a>:</p>
<p>“<em>Just to confuse you, R refers to two things. There is R, the programming language, and R, the piece of software that you use to run programs written in R. Fortunately, most of the time it should be clear from the context which R is being referred to.</em>”</p>
<p>“<em>R (the language) was created in the early 1990s by Ross Ihaka and Robert Gentleman, then both working at the University of Auckland. It is based upon the S language that was developed at Bell Laboratories in the 1970s, primarily by John Chambers. R (the software) is a GNU project, reflecting its status as important free and open source software.</em>”</p>
</section>
<section id="strengths-of-r" class="level2">
<h2 class="anchored" data-anchor-id="strengths-of-r">Strengths of R</h2>
<ul>
<li><p>Free and open source</p></li>
<li><p>Platform independent</p></li>
<li><p>Foster’s a reproducible workflow</p></li>
<li><p>Active community of users and programmers making R better</p></li>
</ul>
</section>
<section id="working-environment" class="level2">
<h2 class="anchored" data-anchor-id="working-environment">Working environment</h2>
<p>In this course we will use <a href="https://posit.co/download/rstudio-desktop/">Rstudio</a>.</p>
<p>Rstudio is an IDE (integrated development environment) that works as a graphical interface that facilitates the use of the R language.</p>
<p>You have a online version, <a href="https://login.rstudio.cloud/login?redirect=%2F">Posit cloud</a></p>
</section>
<section id="r-vs-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="r-vs-rstudio">R vs RStudio</h2>
<p>The following image and sentence is taken from the book <a href="https://moderndive.com/index.html">Statistical Inference via Data Science: A ModernDive into R and the Tidyverse</a></p>
<div id="fig-rvsrstudio" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://moderndive.com/images/shutterstock/R_vs_RStudio_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: R vs Studio <a href="https://moderndive.com/1-getting-started.html">Source</a>.</figcaption>
</figure>
</div>
<p>“<em>More precisely, R is a programming language that runs computations, while RStudio is an integrated development environment (IDE) that provides an interface by adding many convenient features and tools. So just as the way of having access to a speedometer, rearview mirrors, and a navigation system makes driving much easier, using RStudio’s interface makes using R much easier as well.</em>”</p>
</section>
<section id="alternatives" class="level2">
<h2 class="anchored" data-anchor-id="alternatives">Alternatives</h2>
<p>There are alternatives to Rstudio, but Rstudio is the de facto R IDE for many.</p>
<p>An alternative that is gaining a lot of popularity is the well-known <a href="https://code.visualstudio.com/">Visual Studio Code</a>.</p>
<p>If you don’t want to use Rstudio, this would be the suggested alternative</p>
</section>
<section id="highlights-of-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="highlights-of-rstudio">Highlights of RStudio</h2>
<div id="fig-rstdio" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/rstudio-panes-labeled.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: RStudio pane layout. <a href="https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html">Source</a>.</figcaption>
</figure>
</div>
<ul>
<li><p>Lower Right:</p>
<ul>
<li>Files, Plots, Packages, Help</li>
</ul></li>
<li><p>Upper Right:</p>
<ul>
<li>Environment, History</li>
</ul></li>
<li><p>Lower Left: Console</p></li>
<li><p>Upper Left: Text editor</p></li>
<li><p>Nice Features:</p>
<ul>
<li>Importing Data</li>
<li>Tab completion</li>
<li><strong>ChatGTP</strong></li>
</ul></li>
</ul>
</section>
<section id="projects-directories-and-libraries-organising-the-working-environment" class="level2">
<h2 class="anchored" data-anchor-id="projects-directories-and-libraries-organising-the-working-environment">Projects, directories and libraries: Organising the working environment</h2>
<p>To keep all our files organised, including databases we load or graphics we create, we are going to work in what RStudio calls projects.</p>
<p>Essentially, a RStudio project is a folder or directory on your computer that contains all the elements of your project.</p>
<div id="fig-project" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/create%20RProject.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Create a R project</figcaption>
</figure>
</div>
<p>The use of projects in RStudio is a good practice that allows you to keep control of all the files used in a project.</p>
<p>Projects are often not only complex but also dynamic, and the management of all the elements that make up a project is often an essential part of the workflow.</p>
<p>Furthermore, the organisation into projects facilitates reproducibility.</p>
<p>For a more detailed discussion, read this <a href="https://r4ds.hadley.nz/workflow-scripts.html#projects">section</a> of this <a href="https://r4ds.hadley.nz/">good book</a>.</p>
</section>
<section id="basic-functioning" class="level2">
<h2 class="anchored" data-anchor-id="basic-functioning">Basic functioning</h2>
<p>Next, we are going to introduce the basic handling of the working environment, such as defining variables, making comments to the code, etc. In this process, we will be introducing language concepts that we will be defining in a formal way later on.</p>
<section id="arithmetic-operations" class="level3">
<h3 class="anchored" data-anchor-id="arithmetic-operations">Arithmetic operations</h3>
<p>To introduce us to the use of the editor and the command line of Rstudio, we will start with some very basic operations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">-</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">/</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>It is possible to apply standard association rules as well as operations beyond the basic ones (power, logarithm, etc.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">5</span> <span class="sc">+</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">100</span>, <span class="at">base =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">%%</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="assigning-variables" class="level3">
<h3 class="anchored" data-anchor-id="assigning-variables">Assigning variables</h3>
<p>We can store <em>values</em> by assigning a name to them, so that we can access the value later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> (<span class="dv">5</span> <span class="sc">+</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">4</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>You create variables, or create new <em>objects</em> with the <code>&lt;-</code> operator. You can also do this in the more conventional way with <code>=</code> but this is not standard practice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Employees <span class="ot">&lt;-</span> <span class="dv">150</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>Employees</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150</code></pre>
</div>
</div>
<p>With names you have to respect certain conventions: they must start with a letter and can only contain letters, numbers, <code>_</code> and <code>.</code>.</p>
<p>You are free to name variables as you like, but there are some rules of style, for example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>i_use_snake_case</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>otherPeopleUseCamelCase</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>some.people.use.periods</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>What_EVer.I.wha_NT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fig-style" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://allisonhorst.com/everything-else"><img src="https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/dbb99049-2916-4bc8-824f-1816f5c4f06d_rw_1920.png?h=f0b45a30ba31ad414562d1085cd6c172" class="img-fluid figure-img"></a></p>
</figure>
</div>
<figcaption class="figure-caption">Figure&nbsp;4: An illustration of variable naming styles by the great <a href="https://allisonhorst.com/allison-horst">Allison Horst</a>. <a href="https://allisonhorst.com/everything-else">Source</a>.</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>New_analysts_January <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>New_analysts_February <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>Analysts <span class="ot">&lt;-</span> New_analysts_January <span class="sc">+</span> New_analysts_February</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>Analysts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</section>
<section id="introduce-comments" class="level3">
<h3 class="anchored" data-anchor-id="introduce-comments">Introduce comments</h3>
<p>Comments are initiated with <code>#</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculation of number of analysts</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>Analysts <span class="ot">&lt;-</span> New_analysts_January <span class="sc">+</span> New_analysts_February</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>Analysts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</section>
<section id="errors" class="level3">
<h3 class="anchored" data-anchor-id="errors">Errors</h3>
<p>Throughout the course we will talk about R runtime errors, but it is worth getting used to them, as they will always be with us 😢, but they give us a guide to solve them 😊</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## analyst_number_calculation</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>Analysts_update <span class="ot">&lt;-</span> New_analysts_January <span class="sc">+</span> New_analysts_February <span class="sc">+</span> New_analysts_March</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>Analyst_update</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries">Libraries</h2>
<p>Libraries or packages are perhaps the most commonly used elements in R for practical work.</p>
<p>A formal definition of a library from the book <a href="https://r-pkgs.org/">R Packages</a> by Hadley Wickham and Jennifer Bryan is as follows:</p>
<p>“<em>In R, the fundamental unit of shareable code is the package. A package bundles together code, data, documentation, and tests, and is easy to share with others. As of March 2023, there were over 19,000 packages available on the Comprehensive R Archive Network, or CRAN, the public clearing house for R packages</em>”.</p>
<p>An R package is a way to share code in an organised way that expands the possibilities of R by extending its functionality.</p>
<p>Libraries are installed using the <code>install.packages()</code> command, and libraries are loaded with <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(emoji)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emoji)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-types-in-r-data-types" class="level2">
<h2 class="anchored" data-anchor-id="basic-types-in-r-data-types">Basic types in R (<a href="http://www.statmethods.net/input/datatypes.html">Data Types</a>)</h2>
<p>In order to work with data, it is necessary to understand how data is stored in the computer by each programming language.</p>
<p>The structures that store numerical information, and the way they are accessed, differ from Python to R, or from R to other languages.</p>
<p>The most important family of variable types in R are vectors, which can be classified as either atomic or list.</p>
<p>The common data objects in R are:</p>
<ul>
<li>Vectors: one dimensional array
<ul>
<li>Types: numeric, integer, character, factor, logical</li>
</ul></li>
<li>Matrices: two dimensional array
<ul>
<li>Each column must have the same type</li>
</ul></li>
<li><strong>Data Frames</strong>: two dimensional array
<ul>
<li>Columns may have different types</li>
</ul></li>
<li>Lists
<ul>
<li>Items don’t need to be the same size.</li>
</ul></li>
</ul>
<p>The structure of atomic vectors is as follows:</p>
<div id="fig-style" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/summary-tree-atomic.png" class="img-fluid figure-img" width="300"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Atomic vectors. Source: <a href="https://adv-r.hadley.nz/index.html">Advanced R</a></figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>Number <span class="ot">&lt;-</span> <span class="fl">1.0</span> <span class="co"># (real, floating)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>Integer <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>Character <span class="ot">&lt;-</span> <span class="st">"ab"</span>   </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>Logical <span class="ot">&lt;-</span> <span class="cn">TRUE</span>  </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>Number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>Integer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Character</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ab"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Logical</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Be careful when working with different types</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>Number <span class="sc">+</span> Character</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we perform an operation with two different numeric types (real + integer), R <em>forces</em> (coerces) the result to the type with the highest precision, in this case the real type.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>Sum <span class="ot">&lt;-</span> Number <span class="sc">+</span> Integer</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>Sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>Several things here, we’ve had our first approximation to a function in R, a topic we’ll explore in more detail later. Like the intuitive idea we have of a function from high school mathematics, a function in R has an argument (variable in parentheses) and gives us a result.</p>
<p>In R, functions have their name followed by parentheses, where we place the argument variable(s): <code>a_function(x)</code>.</p>
<p>The <code>typeof()</code> function tells us the type of the variable (numeric, integer or logical).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Integer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Character)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Logical)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<p>There are also specific functions to determine whether a variable is of a specific type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(Number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(Integer) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(Character)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(Logical)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>We see that R tells us that <code>Integer</code> is not an integer, to specify an integer we have to put a letter L at the end of the number</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>Integer_2 <span class="ot">&lt;-</span> 1L</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>Integer_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(Integer_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(Integer_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<section id="vectors" class="level3">
<h3 class="anchored" data-anchor-id="vectors">Vectors</h3>
<p>We are going to use R to analyse data and create statistical or algorithmic models from it.</p>
<p>Most data is represented in <em>tables</em>: spreadsheets, relational databases tables, .csv files, etc.</p>
<p>Most statistical models use as input data in table form.</p>
<p>The most commonly used objects for working with tables in R are <strong>data frames</strong> and other variants (tibble or data.tables for example).</p>
<p>Before understanding how to work with tables, let’s review the concept of vector, which is the basic type on which data frames are built.</p>
<p>What characterises a vector is that it can store only data of the <strong>same type</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>vector_numeric <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">49</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>vector_character <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>vector_numeric</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 10 49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>vector_character</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "b" "c"</code></pre>
</div>
</div>
<p>Vectors are one-dimensional arrays (row or column) that can store numbers, characters or logical variables.</p>
<p>As we have seen above, vectors are created with the <code>c()</code> command where the c stands for <em>combine</em>.</p>
<p><strong>Be careful not to confuse</strong> this structure with vectors as elements of a vector space (more on this later).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>vector_mixed <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"a"</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>vector_mixed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2" "a"</code></pre>
</div>
</div>
<p>In the previous example we wanted to create a vector with elements of different types, numeric and character. R has converted all the elements to character.</p>
<p>If there are characters in a vector R converts all the elements to character, if they are all numeric but of different types, R converts them to the type with the highest precision (double). What happens with logical vectors?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>vector_mixed2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">TRUE</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>vector_mixed2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(vector_mixed2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>In this case R has converted the elements of the vector to numeric.</p>
<p>We observe something that later will be very useful, R has assigned to the logical variable <code>TRUE</code> the number 1. The variable <code>FALSE</code> has been assigned a zero.</p>
<p>Can we change a variable or a vector type? YES</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>vector_numeric</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 10 49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(vector_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"  "10" "49"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>logic_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>logic_vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(logic_vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0</code></pre>
</div>
</div>
<p>There are several functions in R that allow for changes of type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(logic_vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TRUE"  "FALSE"</code></pre>
</div>
</div>
<p>There are a couple of other ways to create vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>vector_1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>vector_2 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>vector_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>vector_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p>where <code>seq</code> stands for sequence</p>
<p>Since in this course the data we will use is external and not generated by us, we will not go into the different ways of generating vectors. The following box elaborates in more detail on this topic and is optional, you can follow the rest of the lecture without reading it.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>More complex sequences can be created with the <code>seq()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>vector_3 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>vector_4 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>, <span class="at">length.out =</span> <span class="dv">20</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>vector_5 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>, <span class="at">along.with =</span> vector_1)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>vector_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>vector_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1.000000  1.473684  1.947368  2.421053  2.894737  3.368421  3.842105
 [8]  4.315789  4.789474  5.263158  5.736842  6.210526  6.684211  7.157895
[15]  7.631579  8.105263  8.578947  9.052632  9.526316 10.000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>vector_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.00  3.25  5.50  7.75 10.00</code></pre>
</div>
</div>
<p>Another command to generate sequences is <code>rep</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>repeated <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>repeated</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 4 4 4 4 4 4 4 4 4</code></pre>
</div>
</div>
<p>We can repeat not only a value but vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>repeat_2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>repeat_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>repeat_3 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">4</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>repeat_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 2 2 2 2 3 3 3 3 4 4 4 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>repeat_4 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each=</span><span class="dv">2</span>, <span class="at">times=</span><span class="dv">2</span>)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>repeat_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>repeat_5 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>repeat_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 2 3 3 3 3 4 4 4 4 4</code></pre>
</div>
</div>
<p>We can also create <em>random</em> vectors, i.e., realisations of a random variable from a given distribution</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>random_normal <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>random_uniform <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>random_normal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0.458734097 -0.791811410 -1.093236871  0.005712865 -0.946869512
 [6]  1.209432796  0.389010321  1.250471501 -0.938889095  0.262763652</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>random_uniform</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.9860380 0.9221407 0.4352323 0.4512699 0.5333578 0.6686487 0.8741746
 [8] 0.4021351 0.8843127 0.1313069</code></pre>
</div>
</div>
</div>
</div>
<p>The elements of the vector can be assigned names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(vector_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>names_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>, <span class="st">"four"</span>, <span class="st">"five"</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(vector_1) <span class="ot">&lt;-</span> names_vec</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(vector_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "one"   "two"   "three" "four"  "five" </code></pre>
</div>
</div>
<p>Another characteristic of vectors besides their type, is their <strong>length</strong> or dimension, which we can determine with the <code>length()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vector_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vector_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(repeat_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
</div>
<section id="arithmetic-operations-with-vectors" class="level4">
<h4 class="anchored" data-anchor-id="arithmetic-operations-with-vectors">Arithmetic operations with vectors</h4>
<p>Arithmetic operations can be performed with vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>vector_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     2     3     4     5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>vector_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>Vec_sum <span class="ot">&lt;-</span> vector_1 <span class="sc">+</span>vector_2</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>Vec_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    2     4     6     8    10 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>vector_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     2     3     4     5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>vector_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>Vec_product <span class="ot">&lt;-</span> vector_1 <span class="sc">*</span> vector_2</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>Vec_product</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     4     9    16    25 </code></pre>
</div>
</div>
<p>In this case, both vectors have the same dimension. What happens if the opposite is true?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>vector_1 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     2     3     4     5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">6</span>,<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  6  7  8  9 10 11 12 13 14 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>vector_1 <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">6</span>,<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  9 11 13 15 12 14 16 18 20</code></pre>
</div>
</div>
<p>This peculiar behaviour is called <strong>recycling</strong>. Observe the result: what has R done in this case?</p>
</section>
<section id="vectorisation-of-operations" class="level4">
<h4 class="anchored" data-anchor-id="vectorisation-of-operations">Vectorisation of operations</h4>
<p>An operation is said to be vectorised if it can be applied to all elements of a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>vector_numeric</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 10 49</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>vector_numeric <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3 12 51</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>vector_numeric <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2 20 98</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>vector_numeric <span class="sc">/</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.5  5.0 24.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>vector_numeric<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    1  100 2401</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(vector_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.000000 3.162278 7.000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(vector_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.000000 2.302585 3.891820</code></pre>
</div>
</div>
<p>We note that when an arithmetic operator (<code>+</code>, <code>*</code>, <code>-</code>, <code>/</code>, <code>^</code>) is applied to a vector, the operation is performed on each of the elements of the vector. Similarly, when we apply a function (<code>sqrt()</code>, <code>log()</code>) it uses all the elements of the vector as arguments and its output is a vector of dimension equal to the dimension of the original vector.</p>
</section>
<section id="vector-inspection" class="level4">
<h4 class="anchored" data-anchor-id="vector-inspection">Vector inspection</h4>
<p>It is possible to apply certain functions to analyse some characteristics of vectors.</p>
<p>Remember that the ultimate goal is to perform data analysis, some of these functions will be used on a regular basis when we want to inspect data in a table.</p>
<p>Basic statistics of a vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vector_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    3.25    5.50    5.50    7.75   10.00 </code></pre>
</div>
</div>
<p>Values at the beginning and at the end</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vector_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.000000 1.473684 1.947368 2.421053 2.894737 3.368421</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(vector_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7.631579  8.105263  8.578947  9.052632  9.526316 10.000000</code></pre>
</div>
</div>
</section>
<section id="selections" class="level4">
<h4 class="anchored" data-anchor-id="selections">Selections</h4>
<p>It is possible to construct new vectors from a vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>vector_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     2     3     4     5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>vector_square <span class="ot">&lt;-</span> vector_1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>vector_square</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four  five 
    1     4     9    16    25 </code></pre>
</div>
</div>
<p>How do we access the elements of a vector?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>one 
  1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>three 
    9 </code></pre>
</div>
</div>
<p>Several elements in a row (slice)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three 
    1     4     9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>three   two   one 
    9     4     1 </code></pre>
</div>
</div>
<p>Non consecutive elements of a vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one three 
    1     9 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>three   one 
    9     1 </code></pre>
</div>
</div>
<p>All elements except some</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> two four five 
   4   16   25 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="sc">-</span><span class="fu">length</span>(vector_square)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one   two three  four 
    1     4     9    16 </code></pre>
</div>
</div>
<p>All elements satisfying a condition</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>vector_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.00  3.25  5.50  7.75 10.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>vector_5[vector_5 <span class="sc">&lt;</span> <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.00 3.25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>vector_5[vector_5 <span class="sc">&gt;</span> <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5.50  7.75 10.00</code></pre>
</div>
</div>
<p>The condition can be an equality</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>vector_5[vector_5 <span class="sc">==</span> <span class="fl">5.5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5</code></pre>
</div>
</div>
<p>These conditions are very important for data analysis. Suppose you want to locate in a table with the financial data from a sample of bank costumers, those customers whose income is greater than 30,000 per year.</p>
<p>It is also useful to locate data and replace it with another value. Following the example above, replace the income column for customers whose annual income is less than 12,000 per year with zero, as we will not be working with that segment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>vector_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.00  3.25  5.50  7.75 10.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>vector_5[vector_5 <span class="sc">&lt;</span> <span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>vector_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.00  0.00  5.50  7.75 10.00</code></pre>
</div>
</div>
<p>In case the vectors have names, we can use these to select elements</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="st">"two"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>two 
  4 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>vector_square[<span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"three"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  one three 
    1     9 </code></pre>
</div>
</div>
<p>More functions applied to vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>vector_5 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>, <span class="at">along.with =</span> vector_1)</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>vector_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.00  3.25  5.50  7.75 10.00</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(vector_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(vector_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vector_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prod</span>(vector_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1385.312</code></pre>
</div>
</div>
</section>
</section>
<section id="matrices" class="level3">
<h3 class="anchored" data-anchor-id="matrices">Matrices</h3>
<p>So far we have been working with a one-dimensional data structure, but in data analysis we are sometimes interested in <em>discovering</em> or finding relationships between variables, so it is necessary to look at them as a whole in order to capture interrelationships.</p>
<p>In our particular case, we will represent subsets of the input output table as matrices, and apply linear algebra operations to them.</p>
<p>This forces us to have to work in more than one dimension, in R we can do that with <strong>matrices</strong> and <strong>arrays</strong>.</p>
<p>A matrix is nothing more than a two-dimensional structure that allows us to store homogeneous data. To construct a matrix we use the <code>matrix()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>vector_6 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">8</span>)</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>vector_6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector_6)</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    1
[2,]    2
[3,]    3
[4,]    4
[5,]    5
[6,]    6
[7,]    7
[8,]    8</code></pre>
</div>
</div>
<p>We have a one-column vector. What if we want more than one dimension?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector_6, <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector_6, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    5
[2,]    2    6
[3,]    3    7
[4,]    4    8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector_6, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    5
[2,]    2    6
[3,]    3    7
[4,]    4    8</code></pre>
</div>
</div>
<p>We notice that the matrix is <em>filled</em> by columns, we can change that behaviour</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector_6, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    2
[2,]    3    4
[3,]    5    6
[4,]    7    8</code></pre>
</div>
</div>
<p>Just as we had the name attribute for vectors, we can also name the rows and columns of a matrix. To inspect the row names of a matrix we use <code>rownames()</code>, and the row names <code>colnames()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p>NULL indicates when an expression or function results in an undefined value. In this case it indicates that the array has no names. Let’s assign names to it by associating a vector of characters</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"row_1"</span>, <span class="st">"row_2"</span>, <span class="st">"row_3"</span>, <span class="st">"row_4"</span>)</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"column_1"</span>, <span class="st">"column_2"</span>)</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "row_1" "row_2" "row_3" "row_4"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "column_1" "column_2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      column_1 column_2
row_1        1        2
row_2        3        4
row_3        5        6
row_4        7        8</code></pre>
</div>
</div>
<p>`<code>dimnames()</code> is another way to inspect/assign the names of an array.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "row_1" "row_2" "row_3" "row_4"

[[2]]
[1] "column_1" "column_2"</code></pre>
</div>
</div>
<p>Is there anything strange about this structure? There are <em>lists</em>, a topic that we will not be covered in this course.</p>
<p>Accessing the elements of an array is very similar to the case of vectors, we just need to differentiate between dimensions with a comma <code>,</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      column_1 column_2
row_1        1        2
row_2        3        4
row_3        5        6
row_4        7        8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">1</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">3</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>A[<span class="st">"row_2"</span>, <span class="st">"column_2"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>row_1 row_2 
    1     3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>A[<span class="fu">c</span>(<span class="st">"row_1"</span>, <span class="st">"row_4"</span>), <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>row_1 row_4 
    2     8 </code></pre>
</div>
</div>
<p>One operation that is widely used in practice is to create a new <em>table</em> from another by binding rows and columns. This is done with the <code>rbind()</code> and <code>cbind()</code> functions.</p>
<p>If we want to add columns based on another matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">125</span>)</span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>matrix_A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">8</span>, <span class="at">min =</span> <span class="dv">10</span>, <span class="at">max =</span> <span class="dv">50</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>matrix_B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">min =</span> <span class="dv">10</span>, <span class="at">max =</span> <span class="dv">50</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">1</span>)</span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a>matrix_A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]     [,2]     [,3]     [,4]
[1,] 42.98698 21.99122 48.60780 31.32369
[2,] 14.67404 24.26243 48.70242 23.28622</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>matrix_B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]
[1,] 36.15375
[2,] 34.58198</code></pre>
</div>
</div>
<p>We combine both matrices</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>matrix_AB <span class="ot">&lt;-</span> <span class="fu">cbind</span>(matrix_A, matrix_B)</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a>matrix_AB</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]     [,2]     [,3]     [,4]     [,5]
[1,] 42.98698 21.99122 48.60780 31.32369 36.15375
[2,] 14.67404 24.26243 48.70242 23.28622 34.58198</code></pre>
</div>
</div>
<p>If we want to add rows based on another matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>matrix_C <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">min =</span> <span class="dv">10</span>, <span class="at">max =</span> <span class="dv">50</span>), <span class="at">nrow =</span> <span class="dv">1</span>, <span class="at">ncol =</span> <span class="dv">5</span>)</span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>matrix_C</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]     [,2]     [,3]     [,4]     [,5]
[1,] 10.56518 40.53518 24.37221 14.05403 32.27189</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>matrix_ABC <span class="ot">&lt;-</span> <span class="fu">rbind</span>(matrix_AB, matrix_C)</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a>matrix_ABC</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         [,1]     [,2]     [,3]     [,4]     [,5]
[1,] 42.98698 21.99122 48.60780 31.32369 36.15375
[2,] 14.67404 24.26243 48.70242 23.28622 34.58198
[3,] 10.56518 40.53518 24.37221 14.05403 32.27189</code></pre>
</div>
</div>
<p>As mentioned before, matrices are objects that can be manipulated as matrices in the sense of linear algebra. For example, we can calculate the transpose or the inverse of a matrix</p>
<p>Transpose</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      column_1 column_2
row_1        1        2
row_2        3        4
row_3        5        6
row_4        7        8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         row_1 row_2 row_3 row_4
column_1     1     3     5     7
column_2     2     4     6     8</code></pre>
</div>
</div>
<p>Inverse</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      column_1 column_2
row_1        1        2
row_2        3        4
row_3        5        6
row_4        7        8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">solve</span>(A[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         row_1 row_2
column_1  -2.0   1.0
column_2   1.5  -0.5</code></pre>
</div>
</div>
<p>Diagonal</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>vector_diagonal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(vector_diagonal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    0    2    0    0
[3,]    0    0    3    0
[4,]    0    0    0    4</code></pre>
</div>
</div>
<p>In this case</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    0    1    0    0
[3,]    0    0    1    0
[4,]    0    0    0    1</code></pre>
</div>
</div>
<p>The <code>diag(n)</code> command generates a square diagonal matrix of ones whit dimension n</p>
<p>The <code>%*%</code> operator performs products of matrices, as we will see in the practical examples</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the help to determine what the following linear algebra functions do</p>
<p><code>det()</code>, <code>svd()</code>, <code>eigen()</code>, <code>qr()</code>, <code>chol()</code></p>
</div>
</div>
</section>
</section>
<section id="data-frames" class="level2">
<h2 class="anchored" data-anchor-id="data-frames">Data Frames</h2>
<p>The <code>data.frame</code> will be one of the most commonly used objects in R for data analysis.</p>
<p>Data frames are <em>tables</em> or rectangular arrays, we can treat them as if they were an Excel sheet in which we organise the data we want to analyse.</p>
<p>As in Excel, we can do calculations with the tables, create new columns (variables), perform statistical analysis, etc.</p>
<section id="inspecting-the-data" class="level3">
<h3 class="anchored" data-anchor-id="inspecting-the-data">Inspecting the data</h3>
<p>In general, we usually inspect the data in a table to familiarise ourselves with it and see what kind of analysis we can do with it.</p>
<p>Let’s use one of the datasets that already comes with the basic R installation, <code>mtcars</code>.</p>
<p>We can view a user friendly version of the table in RStudio</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
</div>
<p>There are several ways to take a quick look at the data without having to view the whole table.</p>
<p>For example we can see the first 6 rows</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
</div>
<p>Or the last 6</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt qsec vs am gear carb
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2</code></pre>
</div>
</div>
<p>If instead of 6, we want to see a certain number of rows, we simply tell the <code>head</code> and <code>tail</code> functions to do so</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4     21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710    22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mtcars, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               mpg cyl disp  hp drat   wt qsec vs am gear carb
Maserati Bora 15.0   8  301 335 3.54 3.57 14.6  0  1    5    8
Volvo 142E    21.4   4  121 109 4.11 2.78 18.6  1  1    4    2</code></pre>
</div>
</div>
<p>Sometimes we use very large tables that store many variables, in this case before displaying even a fraction of the table, it is useful to inspect the column names of the data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear"
[11] "carb"</code></pre>
</div>
</div>
<p>In general, in order to determine how many variables and how many observations we have, we use the <code>dim</code> function, which gives the number of columns and rows in the table</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 11</code></pre>
</div>
</div>
<p>We can see the number of rows and columns separately with <code>nrow</code> and <code>ncol</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32</code></pre>
</div>
</div>
<p>Another way is to use the <code>str</code> function. Although it is not intuitive and even intimidating at first glance, it is not that complicated and provides useful information.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
</div>
<p>A version that provides statistical information is <code>summary</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      mpg             cyl             disp             hp       
 Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
 1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
 Median :19.20   Median :6.000   Median :196.3   Median :123.0  
 Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
 3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
 Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
      drat             wt             qsec             vs        
 Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
 1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
 Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
 Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
 3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
 Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
       am              gear            carb      
 Min.   :0.0000   Min.   :3.000   Min.   :1.000  
 1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000  
 Median :0.0000   Median :4.000   Median :2.000  
 Mean   :0.4062   Mean   :3.688   Mean   :2.812  
 3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000  
 Max.   :1.0000   Max.   :5.000   Max.   :8.000  </code></pre>
</div>
</div>
<p>Now that we have our data in a data frame, the next step is to access subsets of data in the table (a column or group of rows that meet a condition), manipulate it and create new variables.</p>
<p>We can access the data in the data frame in the same way as we did with vectors, data frames are a kind of set of vectors.</p>
<p>Remember that we could access elements of vectors by position or name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">1</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">1</span>,<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 110</code></pre>
</div>
</div>
<p>In the first case we tell R that we want it to show us the data of the first row and the second column, in the second case the data of the first row and the fourth column.</p>
<p>In the case that we want to see a specific column or row, we leave one of the dimensions blank.</p>
<p>If we want to access the information of the second row</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4</code></pre>
</div>
</div>
<p>If we want to access the information in the fourth column</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>mtcars[ , <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 110 110  93 110 175 105 245  62  95 123 123 180 180 180 205 215 230  66  52
[20]  65  97 150 150 245 175  66  91 113 264 175 335 109</code></pre>
</div>
</div>
<p>We can also get the information per column using the column name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>mtcars[ , <span class="st">"cyl"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
</div>
</div>
<p>Likewise, we can inspect a data frame column by typing the data frame name followed by a <code>$</code> sign and the column name.</p>
<p>The advantage of this method is that the column names are autocompleted</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>cyl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4</code></pre>
</div>
</div>
<p>With position, like vectors, we can access sets of rows and columns (slices).</p>
<p>For example, if we want to keep only the first 3 rows and the fourth and fifth columns, we can access the following position sets</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               hp drat
Mazda RX4     110 3.90
Mazda RX4 Wag 110 3.90
Datsun 710     93 3.85</code></pre>
</div>
</div>
<p>We can build a new table from this sub-table, assigning a name to the latter</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a>mtcars_peque <span class="ot">&lt;-</span> mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a>mtcars_peque</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               hp drat
Mazda RX4     110 3.90
Mazda RX4 Wag 110 3.90
Datsun 710     93 3.85</code></pre>
</div>
</div>
<p>Sub-table with first 10 rows only</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360        14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280          19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</code></pre>
</div>
</div>
<p>Sub-table with last 2 columns only</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>mtcars[, <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     hp drat
Mazda RX4           110 3.90
Mazda RX4 Wag       110 3.90
Datsun 710           93 3.85
Hornet 4 Drive      110 3.08
Hornet Sportabout   175 3.15
Valiant             105 2.76
Duster 360          245 3.21
Merc 240D            62 3.69
Merc 230             95 3.92
Merc 280            123 3.92
Merc 280C           123 3.92
Merc 450SE          180 3.07
Merc 450SL          180 3.07
Merc 450SLC         180 3.07
Cadillac Fleetwood  205 2.93
Lincoln Continental 215 3.00
Chrysler Imperial   230 3.23
Fiat 128             66 4.08
Honda Civic          52 4.93
Toyota Corolla       65 4.22
Toyota Corona        97 3.70
Dodge Challenger    150 2.76
AMC Javelin         150 3.15
Camaro Z28          245 3.73
Pontiac Firebird    175 3.08
Fiat X1-9            66 4.08
Porsche 914-2        91 4.43
Lotus Europa        113 3.77
Ford Pantera L      264 4.22
Ferrari Dino        175 3.62
Maserati Bora       335 3.54
Volvo 142E          109 4.11</code></pre>
</div>
</div>
<p>We can select data with criteria based on meeting a condition</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">&gt;</span> <span class="dv">4</span> , ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">6</span> , ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C      17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6</code></pre>
</div>
</div>
<p>We can complicate it</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">6</span> <span class="sc">&amp;</span> mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">18</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6</code></pre>
</div>
</div>
<p>We have asked R to show us the data in the table corresponding to cars with 6 cylinders and miles per gallon greater that 18.</p>
<p>Both conditions are fulfilled at the same time.</p>
<p>In case you need that only one of the condition holds:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">6</span> <span class="sc">|</span> mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">18</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280          19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C         17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Fiat 128          32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic       30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla    33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona     21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Pontiac Firebird  19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Fiat X1-9         27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2     26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa      30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ferrari Dino      19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Volvo 142E        21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
</div>
</section>
</section>
<section id="read-and-write-data-in-r" class="level2">
<h2 class="anchored" data-anchor-id="read-and-write-data-in-r">Read and write data in R</h2>
<p>As mentioned earlier, instead of <em>generating</em> the data we will be analysing, we typically obtain the data from external sources. In our case, the input-output tables are generated by the national statistical institutes.</p>
<p>These tables are shared in various formats, such as Excel or flat files (mainly csv). It is advisable to prioritize the use of flat files.</p>
<p>Similarly, we will also want to save the data generated in R in a format that can be read in other platforms, such as Excel.</p>
<section id="reading-data-in-r" class="level3">
<h3 class="anchored" data-anchor-id="reading-data-in-r">Reading data in R</h3>
<p>In this presentation we will focus on two formats: Excel and csv.</p>
<section id="csv-files" class="level4">
<h4 class="anchored" data-anchor-id="csv-files">csv files</h4>
<p>The R base function for reading csv files is <code>read.csv()</code>.</p>
<p>We need to provide the function with the file’s location path.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a>mtcars_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"mtcars.csv"</span>)</span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Inspecting the function, we can find additional arguments. Let us explore them using the tab button.</p>
<p>In practice, we typically use the arguments <code>header</code>, <code>sep</code> and <code>dec</code></p>
</section>
<section id="xlsx-files" class="level4">
<h4 class="anchored" data-anchor-id="xlsx-files">xlsx files</h4>
<p>Base R does not have a function to read Excel files, so we must rely on a library. The most common choice is the <code>readxl</code> package.</p>
<p>Once we load the library, we will use the function <code>read_excel()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a>mtcars_excel <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"mtcars.xlsx"</span>)</span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-5"><a href="#cb314-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars_excel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the practice section, we will use some of the other arguments of the read_excel() function. It’s worth mentioning the skip argument, which is used if we don’t wish to read the first n lines of an Excel file.</p>
</section>
</section>
<section id="writing-data-in-r" class="level3">
<h3 class="anchored" data-anchor-id="writing-data-in-r">Writing data in R</h3>
<p>Unsurprisingly, we write data from R using the functions <code>write.csv()</code> and <code>write_xlsx()</code></p>
<p>We must provide both functions with the object (data frame) we wish to save and the file path.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> airquality, <span class="at">file =</span> <span class="st">"my_airquality.csv"</span>)</span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-3"><a href="#cb315-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb315-4"><a href="#cb315-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-5"><a href="#cb315-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(<span class="at">x =</span> airquality, <span class="at">path =</span> <span class="st">"my_airquality.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="más-allá-de-los-data-frames" class="level1">
<h1>Más allá de los data frames</h1>
<p>Los data frames son una estructura extremadamente útil, con la gran ventaja de que forma parte del ecosistema de R base (no depende de librería elaboradas por terceros). Pero, lo anterior también representa también una restricción, por lo que se han desarrollado librerías que complementan las propiedades de los data frames</p>
<section id="el-universo-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="el-universo-tidyverse">El universo Tidyverse</h2>
<div id="fig-tidyverse" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/tidyverse_website.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Colección de paquetes del ecosistema Tidyverse. Ver su <a href="https://www.tidyverse.org/">web</a></figcaption>
</figure>
</div>
<p>La principal referencia de este apartado va a ser este <a href="https://r4ds.had.co.nz/transform.html">capítulo</a> del libro <a href="https://r4ds.had.co.nz/index.html">R for Data Science</a> (acá en <a href="https://es.r4ds.hadley.nz/">español</a>)</p>
<p>En esta primera parte de la exposición nos concentraremos en el paquete <a href="https://dplyr.tidyverse.org/">dplyr</a> y en la manipulación de datos, e introduciremos el pipe de la librería <a href="https://magrittr.tidyverse.org/">magrittr</a></p>
<section id="dplyr" class="level3">
<h3 class="anchored" data-anchor-id="dplyr">Dplyr</h3>
<div id="fig-dplyr" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/logo.png" class="img-fluid figure-img" width="200"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Hex sticker de dplyr</figcaption>
</figure>
</div>
<p>En su página web, se presenta la librería dplyr como “<em>dplyr es una gramática de manipulación de datos, que proporciona un conjunto coherente de verbos que ayudan a resolver los problemas más comunes de manipulación de datos</em>”</p>
<p>Otra definición se puede ver en este <a href="https://www.datanalytics.com/libro_r/1300_dplyr.html">texto</a> de <a href="https://www.datanalytics.com/bio/">Carlos Gil Bellosta</a></p>
<p>El “conjunto de verbos” es el siguiente:</p>
<ul>
<li><code>mutate()</code> añade nuevas variables que son funciones de variables existentes</li>
<li><code>select()</code> selecciona variables basándose en sus nombres</li>
<li><code>filter()</code> selecciona casos basándose en sus valores</li>
<li><code>summarise()</code> reduce múltiples valores a un único resumen</li>
<li><code>arrange()</code> cambia el orden de las filas.</li>
</ul>
<p>Al ser una librería desarrollada por terceros, hay que instalar la librería (se hace una sola vez) y cargarla</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vamos a trabajar con el conjunto de datos <code>starwars</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 R2-D2        96    32 &lt;NA&gt;       white, bl~ red             33   none  mascu~
 4 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 5 Leia Or~    150    49 brown      light      brown           19   fema~ femin~
 6 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 7 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 9 Biggs D~    183    84 black      light      brown           24   male  mascu~
10 Obi-Wan~    182    77 auburn, w~ fair       blue-gray       57   male  mascu~
# i 77 more rows
# i 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>Observen que nuestro data frame ha <em>cambiado</em> de nombre, ahora es un <code>tibble</code>. Leer este capítulo del <a href="https://es.r4ds.hadley.nz/10-tibble.html">libro</a> para una exposición detallada.</p>
<p>Inspeccionamos el data frame (si, el tibble sigue siendo un data frame) con <code>glimpse</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(starwars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 87
Columns: 14
$ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia Or~
$ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2~
$ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.~
$ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown", N~
$ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light", "~
$ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blue",~
$ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, ~
$ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "male", "female",~
$ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "femini~
$ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan", "T~
$ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "Huma~
$ films      &lt;list&gt; &lt;"A New Hope", "The Empire Strikes Back", "Return of the J~
$ vehicles   &lt;list&gt; &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "Imp~
$ starships  &lt;list&gt; &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1",~</code></pre>
</div>
</div>
<p>Antes de continuar, es mejor presentar ya el <em>pipe</em> de <a href="https://magrittr.tidyverse.org/">magrittr</a>. Empezaremos con un ejemplo simple en el cual deseamos calcular el logaritmo de la raíz cuadrada de la sumatoria de una secuencia de 20 realizaciones de una distribución uniforme.</p>
<p>Los pasos serían los siguientes:</p>
<ul>
<li>Generar la secuencia de 20 realizaciones de una distribución uniforme <code>runif(20)</code></li>
<li>Calcular la sumatoria <code>sum(runif(20)))</code></li>
<li>Obtener la raíz cuadrada <code>sqrt(sum(runif(20)))</code></li>
<li>Aplicar el logaritmo <code>log(sqrt(sum(runif(20))))</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">356</span>)</span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="fu">runif</span>(<span class="dv">20</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.257018</code></pre>
</div>
</div>
<p>La función es algo complicada de leer, y se complica su lectura a medida que añadimos más funciones.</p>
<p>El <strong>pipe</strong> (tubería) de magrittr <code>%&gt;%</code> parte de la misma idea que el pipe de bash <code>|</code>, pasar el output de la salida de una función a otra función de manera encadenada.</p>
<p>Una manera “limpia” de ejecutar varios verbos de manera secuencial es a través del uso del pipe</p>
<p>Según su web, dicha herramienta permite hacer nuestro código más legible por las siguientes razones:</p>
<ul>
<li><p>estructurando secuencias de operaciones de datos de izquierda a derecha (en lugar de dentro a fuera)</p></li>
<li><p>evitando las llamadas a funciones anidadas</p></li>
<li><p>minimizando la necesidad de variables locales y definiciones de funciones</p></li>
<li><p>facilitar añadir pasos en cualquier punto de la secuencia de operaciones</p></li>
</ul>
<p>La operación anterior quedaría de la siguiente forma con pipes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">356</span>)</span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb323-6"><a href="#cb323-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.257018</code></pre>
</div>
</div>
<p>Lo cual, es más natural y fácil de leer. Vamos a aplicar este encadenamiento de funciones con el pipe de manera intensiva con dplyr</p>
<p>Vamos a seleccionar filas que cumplan una determinada condición, esto se hace con el verbo <code>filter()</code></p>
<p>Por ejemplo, nos quedamos solo con los personajes de Star Wars que son de Tatooine</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 4 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 5 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 6 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 7 Biggs D~    183    84 black      light      brown           24   male  mascu~
 8 Anakin ~    188    84 blond      fair       blue            41.9 male  mascu~
 9 Shmi Sk~    163    NA black      fair       brown           72   fema~ femin~
10 Cliegg ~    183    NA brown      fair       blue            82   male  mascu~
# i 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>O que viva en Tatooine y sean de género masculino</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span> <span class="sc">&amp;</span> gender <span class="sc">==</span> <span class="st">"masculine"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky~    172    77 blond      fair       blue            19   male  mascu~
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
3 Darth Va~    202   136 none       white      yellow          41.9 male  mascu~
4 Owen Lars    178   120 brown, gr~ light      blue            52   male  mascu~
5 R5-D4         97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
6 Biggs Da~    183    84 black      light      brown           24   male  mascu~
7 Anakin S~    188    84 blond      fair       blue            41.9 male  mascu~
8 Cliegg L~    183    NA brown      fair       blue            82   male  mascu~
# i 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>O queremos quedarnos con aquellos registros que no sean humanos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">!=</span> <span class="st">"Human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 x 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu~
 2 R2-D2        96    32 &lt;NA&gt;       white, bl~ red               33 none  mascu~
 3 R5-D4        97    32 &lt;NA&gt;       white, red red               NA none  mascu~
 4 Chewbac~    228   112 brown      unknown    blue             200 male  mascu~
 5 Greedo      173    74 &lt;NA&gt;       green      black             44 male  mascu~
 6 Jabba D~    175  1358 &lt;NA&gt;       green-tan~ orange           600 herm~ mascu~
 7 Yoda         66    17 white      green      brown            896 male  mascu~
 8 IG-88       200   140 none       metal      red               15 none  mascu~
 9 Bossk       190   113 none       green      red               53 male  mascu~
10 Ackbar      180    83 none       brown mot~ orange            41 male  mascu~
# i 38 more rows
# i 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>Si lo que deseamos es seleccionar columnas, usamos el verbo <code>select()</code></p>
<p>Siguiendo con el primer ejemplo, queremos saber que personajes de Star Wars son de Tatooine, pero solo queremos ver la columna del nombre del personaje</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 1
   name              
   &lt;chr&gt;             
 1 Luke Skywalker    
 2 C-3PO             
 3 Darth Vader       
 4 Owen Lars         
 5 Beru Whitesun Lars
 6 R5-D4             
 7 Biggs Darklighter 
 8 Anakin Skywalker  
 9 Shmi Skywalker    
10 Cliegg Lars       </code></pre>
</div>
</div>
<p>Además del nombre, queremos saber su altura y la especie</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, height, species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 3
   name               height species
   &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;  
 1 Luke Skywalker        172 Human  
 2 C-3PO                 167 Droid  
 3 Darth Vader           202 Human  
 4 Owen Lars             178 Human  
 5 Beru Whitesun Lars    165 Human  
 6 R5-D4                  97 Droid  
 7 Biggs Darklighter     183 Human  
 8 Anakin Skywalker      188 Human  
 9 Shmi Skywalker        163 Human  
10 Cliegg Lars           183 Human  </code></pre>
</div>
</div>
<p>Supongamos que no sabemos de antemano, cuantos tipos de especies hay, y deseamos saberlo para aplicar los filtros adecuados. En R base tendríamos que extraer la columna y usar la función <code>unique()</code> (<code>unique(starwars$species)</code>). En dplyr tenemos la función <code>distinct()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 x 1
   species       
   &lt;chr&gt;         
 1 Human         
 2 Droid         
 3 Wookiee       
 4 Rodian        
 5 Hutt          
 6 &lt;NA&gt;          
 7 Yoda's species
 8 Trandoshan    
 9 Mon Calamari  
10 Ewok          
# i 28 more rows</code></pre>
</div>
</div>
<p>Si queremos contar cuantos registros hay por especie, usamos la función <code>count()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 x 2
   species       n
   &lt;chr&gt;     &lt;int&gt;
 1 Aleena        1
 2 Besalisk      1
 3 Cerean        1
 4 Chagrian      1
 5 Clawdite      1
 6 Droid         6
 7 Dug           1
 8 Ewok          1
 9 Geonosian     1
10 Gungan        3
# i 28 more rows</code></pre>
</div>
</div>
<p>Si deseamos que presente la información en orden descendente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 x 2
   species      n
   &lt;chr&gt;    &lt;int&gt;
 1 Human       35
 2 Droid        6
 3 &lt;NA&gt;         4
 4 Gungan       3
 5 Kaminoan     2
 6 Mirialan     2
 7 Twi'lek      2
 8 Wookiee      2
 9 Zabrak       2
10 Aleena       1
# i 28 more rows</code></pre>
</div>
</div>
<p>Si una vez escogida la columna deseada, desea ordenarla como en la caso anterior, usamos el verbo <code>arrange()</code>. En este caso seleccionamos la columna de masa corporal y nombre</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, mass) <span class="sc">%&gt;%</span></span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 2
   name                   mass
   &lt;chr&gt;                 &lt;dbl&gt;
 1 Ratts Tyerel             15
 2 Yoda                     17
 3 Wicket Systri Warrick    20
 4 R2-D2                    32
 5 R5-D4                    32
 6 Sebulba                  40
 7 Padmé Amidala            45
 8 Dud Bolt                 45
 9 Wat Tambor               48
10 Sly Moore                48
# i 77 more rows</code></pre>
</div>
</div>
<p>Para ordenarlo de mayor a menos usamos la función <code>desc()</code> dentro de <code>arrange()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, mass) <span class="sc">%&gt;%</span></span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 2
   name                   mass
   &lt;chr&gt;                 &lt;dbl&gt;
 1 Jabba Desilijic Tiure  1358
 2 Grievous                159
 3 IG-88                   140
 4 Darth Vader             136
 5 Tarfful                 136
 6 Owen Lars               120
 7 Bossk                   113
 8 Chewbacca               112
 9 Jek Tono Porkins        110
10 Dexter Jettster         102
# i 77 more rows</code></pre>
</div>
</div>
<p>Supongamos que deseamos seleccionar solo las columnas que cumplan una determinada condición, esto se puede hacer con la función <code>where()</code> dentro del verbo <code>select()</code>. Por ejemplo, si deseamos solo las columnas que contengan variables numéricas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 3
   height  mass birth_year
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1    172    77       19  
 2    167    75      112  
 3     96    32       33  
 4    202   136       41.9
 5    150    49       19  
 6    178   120       52  
 7    165    75       47  
 8     97    32       NA  
 9    183    84       24  
10    182    77       57  
# i 77 more rows</code></pre>
</div>
</div>
<p>Pero, también existen variantes de <code>select()</code> más específicas. Por ejemplo, para este caso también podríamos haber usado <code>select_if()</code> y la condición</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb347-2"><a href="#cb347-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 3
   height  mass birth_year
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1    172    77       19  
 2    167    75      112  
 3     96    32       33  
 4    202   136       41.9
 5    150    49       19  
 6    178   120       52  
 7    165    75       47  
 8     97    32       NA  
 9    183    84       24  
10    182    77       57  
# i 77 more rows</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Hay varias funciones <em>helpers</em> que permiten hacer una selección más fina de columnas. Para echar un vistazo ejecutar <code>?select</code></p>
</div>
</div>
<p>Algo que solemos realizar de manera muy frecuente, es crear nuevas columnas transformando las existentes, esto lo hacemos con el verbo <code>mutate()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">H_W =</span> height <span class="sc">/</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 15
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 R2-D2        96    32 &lt;NA&gt;       white, bl~ red             33   none  mascu~
 4 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 5 Leia Or~    150    49 brown      light      brown           19   fema~ femin~
 6 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 7 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 9 Biggs D~    183    84 black      light      brown           24   male  mascu~
10 Obi-Wan~    182    77 auburn, w~ fair       blue-gray       57   male  mascu~
# i 77 more rows
# i 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, H_W &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Es posible crear varias columnas al mismo tiempo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">H_W =</span> height <span class="sc">/</span> mass,</span>
<span id="cb351-3"><a href="#cb351-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">fakeVar =</span> <span class="fu">sqrt</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 16
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 R2-D2        96    32 &lt;NA&gt;       white, bl~ red             33   none  mascu~
 4 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 5 Leia Or~    150    49 brown      light      brown           19   fema~ femin~
 6 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 7 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 9 Biggs D~    183    84 black      light      brown           24   male  mascu~
10 Obi-Wan~    182    77 auburn, w~ fair       blue-gray       57   male  mascu~
# i 77 more rows
# i 7 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, H_W &lt;dbl&gt;, fakeVar &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Y para finalizar este exceso resumido paso por dplyr, presentamos dos verbos de los más usado en el ciclo de análisis de datos: <code>group_by()</code> y <code>summarise()</code></p>
<p>Para los que conocen SQL, los dos verbos anteriores son el equivalente a un <code>GROUP BY</code> y una operación de agregación</p>
<p>Por ejemplo, supongamos que queremos obtener la altura media por género</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">|&gt;</span> </span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">altura_media =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 x 2
  gender    altura_media
  &lt;chr&gt;            &lt;dbl&gt;
1 feminine          167.
2 masculine         177.
3 &lt;NA&gt;              175 </code></pre>
</div>
</div>
<p>O el peso medio por planeta de origen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">|&gt;</span> </span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">peso_medio =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 x 2
   homeworld      peso_medio
   &lt;chr&gt;               &lt;dbl&gt;
 1 Alderaan             64  
 2 Aleen Minor          15  
 3 Bespin               79  
 4 Bestine IV          110  
 5 Cato Neimoidia       90  
 6 Cerea                82  
 7 Champala            NaN  
 8 Chandrila           NaN  
 9 Concord Dawn         79  
10 Corellia             78.5
# i 39 more rows</code></pre>
</div>
</div>
<p>Recordar que lo podemos ordenar</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">|&gt;</span> </span>
<span id="cb357-3"><a href="#cb357-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">peso_medio =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb357-4"><a href="#cb357-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(peso_medio))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 x 2
   homeworld      peso_medio
   &lt;chr&gt;               &lt;dbl&gt;
 1 Nal Hutta          1358  
 2 Kalee               159  
 3 Kashyyyk            124  
 4 Trandosha           113  
 5 Bestine IV          110  
 6 Ojom                102  
 7 Cato Neimoidia       90  
 8 Glee Anselm          87  
 9 Tatooine             85.4
10 Haruun Kal           84  
# i 39 more rows</code></pre>
</div>
</div>
<p>Número de registros por planeta ordenado de mayor a menor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">|&gt;</span> </span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">registros =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(registros))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 x 2
   homeworld registros
   &lt;chr&gt;         &lt;int&gt;
 1 Naboo            11
 2 Tatooine         10
 3 &lt;NA&gt;             10
 4 Alderaan          3
 5 Coruscant         3
 6 Kamino            3
 7 Corellia          2
 8 Kashyyyk          2
 9 Mirial            2
10 Ryloth            2
# i 39 more rows</code></pre>
</div>
</div>
<p>Y para finalizar, si deseamos cambiar el nombre de una columna, usamos la función <code>rename()</code>, y para cambiar el orden de las columnas <code>relocate()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">planeta =</span> homeworld)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 R2-D2        96    32 &lt;NA&gt;       white, bl~ red             33   none  mascu~
 4 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 5 Leia Or~    150    49 brown      light      brown           19   fema~ femin~
 6 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 7 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 9 Biggs D~    183    84 black      light      brown           24   male  mascu~
10 Obi-Wan~    182    77 auburn, w~ fair       blue-gray       57   male  mascu~
# i 77 more rows
# i 5 more variables: planeta &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(species, <span class="at">.after =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 x 14
   name    height  mass species hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Luke S~    172    77 Human   blond      fair       blue            19   male 
 2 C-3PO      167    75 Droid   &lt;NA&gt;       gold       yellow         112   none 
 3 R2-D2       96    32 Droid   &lt;NA&gt;       white, bl~ red             33   none 
 4 Darth ~    202   136 Human   none       white      yellow          41.9 male 
 5 Leia O~    150    49 Human   brown      light      brown           19   fema~
 6 Owen L~    178   120 Human   brown, gr~ light      blue            52   male 
 7 Beru W~    165    75 Human   brown      light      blue            47   fema~
 8 R5-D4       97    32 Droid   &lt;NA&gt;       white, red red             NA   none 
 9 Biggs ~    183    84 Human   black      light      brown           24   male 
10 Obi-Wa~    182    77 Human   auburn, w~ fair       blue-gray       57   male 
# i 77 more rows
# i 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>Algo adicional que conviene saber y combina bien con las funciones <code>map</code>, los tibbles anidados. Los tibbles anidados se crean con el verbo <code>nest_by()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a>starwars_nested <span class="ot">&lt;-</span> starwars <span class="sc">|&gt;</span></span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest_by</span>(homeworld)</span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true" tabindex="-1"></a>starwars_nested</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 x 2
# Rowwise:  homeworld
   homeworld                     data
   &lt;chr&gt;          &lt;list&lt;tibble[,13]&gt;&gt;
 1 Alderaan                  [3 x 13]
 2 Aleen Minor               [1 x 13]
 3 Bespin                    [1 x 13]
 4 Bestine IV                [1 x 13]
 5 Cato Neimoidia            [1 x 13]
 6 Cerea                     [1 x 13]
 7 Champala                  [1 x 13]
 8 Chandrila                 [1 x 13]
 9 Concord Dawn              [1 x 13]
10 Corellia                  [2 x 13]
# i 39 more rows</code></pre>
</div>
</div>
<p>Se accede al tibble anidado con la sintaxis de una lista</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a>starwars_nested<span class="sc">$</span>data[[<span class="dv">40</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 13
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk~    172    77 blond      fair       blue            19   male  mascu~
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~
 3 Darth V~    202   136 none       white      yellow          41.9 male  mascu~
 4 Owen La~    178   120 brown, gr~ light      blue            52   male  mascu~
 5 Beru Wh~    165    75 brown      light      blue            47   fema~ femin~
 6 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu~
 7 Biggs D~    183    84 black      light      brown           24   male  mascu~
 8 Anakin ~    188    84 blond      fair       blue            41.9 male  mascu~
 9 Shmi Sk~    163    NA black      fair       brown           72   fema~ femin~
10 Cliegg ~    183    NA brown      fair       blue            82   male  mascu~
# i 4 more variables: species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;,
#   starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="más-allá-de-los-tibbles-joins" class="level3">
<h3 class="anchored" data-anchor-id="más-allá-de-los-tibbles-joins">Más allá de los tibbles: joins</h3>
<p>Acabamos esta sección abarcando un problema con el cual ya se han topado en módulos anteriores, el hecho de que es común trabajar con más de una tabla de datos que guardan relación entre si, por lo que recurrimos a los ya conocidos JOINS y sus variantes.</p>
<p>También podemos realizar estas operaciones en tidyverse con las siguientes funciones:</p>
<ul>
<li><p>left_join()</p></li>
<li><p>right_join()</p></li>
<li><p>inner_join()</p></li>
<li><p>full_join()</p></li>
<li><p>anti_join()</p></li>
<li><p>semi_join()</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Una buena introducción a los joins (uniones) con dplyr es <a href="https://es.r4ds.hadley.nz/13-relational-data.html#mutating-joins">esta</a>. Y para una comparación con R base y SQL <a href="https://es.r4ds.hadley.nz/13-relational-data.html#otras-implementaciones">esto</a></p>
</div>
</div>
<p>Vamos a usar un ejemplo de juguete para mostrar los joins más básicos. Creamos dos conjuntos de datos usando la función <code>tibble()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true" tabindex="-1"></a>df_A <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>ID, <span class="sc">~</span>y,</span>
<span id="cb369-3"><a href="#cb369-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">"A"</span>, <span class="dv">5</span>,</span>
<span id="cb369-4"><a href="#cb369-4" aria-hidden="true" tabindex="-1"></a>   <span class="st">"B"</span>, <span class="dv">5</span>,</span>
<span id="cb369-5"><a href="#cb369-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">"C"</span>, <span class="dv">8</span>,</span>
<span id="cb369-6"><a href="#cb369-6" aria-hidden="true" tabindex="-1"></a>   <span class="st">"D"</span>, <span class="dv">0</span>,</span>
<span id="cb369-7"><a href="#cb369-7" aria-hidden="true" tabindex="-1"></a>   <span class="st">"F"</span>, <span class="dv">9</span>)</span>
<span id="cb369-8"><a href="#cb369-8" aria-hidden="true" tabindex="-1"></a>df_B <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb369-9"><a href="#cb369-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>ID, <span class="sc">~</span>z,</span>
<span id="cb369-10"><a href="#cb369-10" aria-hidden="true" tabindex="-1"></a>   <span class="st">"A"</span>, <span class="dv">30</span>,</span>
<span id="cb369-11"><a href="#cb369-11" aria-hidden="true" tabindex="-1"></a>   <span class="st">"B"</span>, <span class="dv">21</span>,</span>
<span id="cb369-12"><a href="#cb369-12" aria-hidden="true" tabindex="-1"></a>   <span class="st">"C"</span>, <span class="dv">22</span>,</span>
<span id="cb369-13"><a href="#cb369-13" aria-hidden="true" tabindex="-1"></a>   <span class="st">"D"</span>, <span class="dv">25</span>,</span>
<span id="cb369-14"><a href="#cb369-14" aria-hidden="true" tabindex="-1"></a>   <span class="st">"E"</span>, <span class="dv">29</span>)</span>
<span id="cb369-15"><a href="#cb369-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-16"><a href="#cb369-16" aria-hidden="true" tabindex="-1"></a>df_A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 2
  ID        y
  &lt;chr&gt; &lt;dbl&gt;
1 A         5
2 B         5
3 C         8
4 D         0
5 F         9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a>df_B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 2
  ID        z
  &lt;chr&gt; &lt;dbl&gt;
1 A        30
2 B        21
3 C        22
4 D        25
5 E        29</code></pre>
</div>
</div>
<ul>
<li>Left join</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(<span class="at">x =</span> df_A, <span class="at">y =</span> df_B, <span class="at">by =</span> <span class="st">"ID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 3
  ID        y     z
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A         5    30
2 B         5    21
3 C         8    22
4 D         0    25
5 F         9    NA</code></pre>
</div>
</div>
<ul>
<li>Right join</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(<span class="at">x =</span> df_A, <span class="at">y =</span> df_B, <span class="at">by =</span> <span class="st">"ID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 3
  ID        y     z
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A         5    30
2 B         5    21
3 C         8    22
4 D         0    25
5 E        NA    29</code></pre>
</div>
</div>
<ul>
<li>Inner join</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(<span class="at">x =</span> df_A, <span class="at">y =</span> df_B, <span class="at">by =</span> <span class="st">"ID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 x 3
  ID        y     z
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A         5    30
2 B         5    21
3 C         8    22
4 D         0    25</code></pre>
</div>
</div>
<ul>
<li>Full join</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(<span class="at">x =</span> df_A, <span class="at">y =</span> df_B, <span class="at">by =</span> <span class="st">"ID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 3
  ID        y     z
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A         5    30
2 B         5    21
3 C         8    22
4 D         0    25
5 F         9    NA
6 E        NA    29</code></pre>
</div>
</div>
<p>¿Qué ocurre si las columnas tienen nombres distintos?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_B)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"KL"</span></span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb381-3"><a href="#cb381-3" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(<span class="at">x =</span> df_A, <span class="at">y =</span> df_B, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ID"</span><span class="ot">=</span><span class="st">"KL"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 3
  ID        y     z
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 A         5    30
2 B         5    21
3 C         8    22
4 D         0    25
5 F         9    NA
6 E        NA    29</code></pre>
</div>
</div>
</section>
</section>
<section id="data.table-the-need-for-speed" class="level2">
<h2 class="anchored" data-anchor-id="data.table-the-need-for-speed">data.table: The need for speed</h2>
<div id="fig-datatble" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/logo4.png" class="img-fluid figure-img" width="200"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Hex sticker de data.table</figcaption>
</figure>
</div>
<p>Ya que nos hemos empapado de parte del tidyverse, vamos a aprender la otra gran alternativa a los data frames estructura de R base, la librería data.table</p>
<p>Antes de empezar a analizar esta librería, primero habría que preguntarse ¿Por qué debemos aprender otras alternativas ya teniendo R base y el tidyverse?</p>
<p>data.table posee unas ventajas idiosincráticas que la hacen una alternativa atractiva. Según los mismos desarrolladores de la librería, data.table:</p>
<p>“<em>es un paquete extremadamente rápido y eficiente en memoria para transformar datos en R.</em>”</p>
<p>Siguiendo a <a href="https://www.datanalytics.com/bio/">Carlos Gil Bellosta</a>, tal y como menciona en su <a href="https://www.datanalytics.com/libro_r/1300_dplyr.html">texto</a>:</p>
<p>“<em>El tidyverse no es el único dialecto popular de R. Por ejemplo, el paquete data.table propone otro dialecto con características muy distintas. El código en dicho dialecto es mucho menos legible pero tiene una ventaja importante: es increíblemente rápido y gestiona muy bien la memoria. Es un paquete (o dialecto) con el que conviene familiarizarse para trabajar con conjuntos de datos muy grandes, de millones, decenas de millones o, incluso de cientos de millones de filas</em>”</p>
<p>Y finalizamos con esta afirmación de <a href="https://grantmcdermott.com/">Grant McDermott</a>, profesor de la Universidad de Oregon y consultor de analítica de grandes datos</p>
<p>“<em>El tidyverse es genial (…) Entonces, ¿por qué molestarse en aprender otro paquete/sintaxis de gestión de datos? En lo que respecta a data.table, se me ocurren al menos cinco razones</em>:</p>
<ul>
<li><p><em>Conciso</em></p></li>
<li><p><em>Increíblemente rápido</em></p></li>
<li><p><em>Uso eficiente de memoria</em></p></li>
<li><p><em>Rico en funciones (y estable)</em></p></li>
<li><p><em>Sin dependencias</em>”</p></li>
</ul>
<p>Mi opinión personal es muy concreta, data.table es muy rápido y eficiente a la hora de manejar una gran cantidad de datos que aún no hayan pasado el límite para convertirse en Big Data.</p>
<p>Pero nada es gratuito, como menciona Gil Bellosta, la sintaxis es menos amigable si la comparamos con la del tidyverse.</p>
<p>La sintaxis de data table se puede resumir mediante el siguiente diagrama:</p>
<div id="fig-tablesintax" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="datatable.jpg" class="img-fluid figure-img" width="200"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Sintaxis de data.table</figcaption>
</figure>
</div>
<ul>
<li><p><span style="color:green;">i</span> indica las filas que deseamos seleccionar ya sea para filtrar o para ejecutar una operación sobre ese subconjunto de filas. El equivalente a <span style="color:green;">filter()</span>, <span style="color:green;">slice()</span> y <span style="color:green;">arrange()</span> en dplyr o <span style="color:green;">WHERE</span> en SQL</p></li>
<li><p><span style="color:blue;">j</span> indica ya sea las columnas que deseamos seleccionar o la operación que deseamos realizar sobre las columnas. El equivalente a <span style="color:blue;">select()</span>; <span style="color:blue;">mutate()</span> en dplyr o <span style="color:blue;">SELECT</span> o las funciones de agregación en SQL</p></li>
<li><p><span style="color:red;">by</span> indica como debemos agregar el conjunto de datos. El equivalente a <span style="color:red;">group_by()</span> en dplyr o <span style="color:red;">GROUP BY</span> en SQL</p></li>
</ul>
<p>Vamos a replicar los ejemplos de la sección anterior para poder realizar una comparación directa</p>
<p>Primero, instalamos la librería y la llamamos posteriormente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(data.table)</span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Convertimos <code>starwars</code> a un objeto <code>data.table</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a>starwars_dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(starwars)</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true" tabindex="-1"></a>starwars_dt </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name height   mass    hair_color          skin_color
 1:        Luke Skywalker    172   77.0         blond                fair
 2:                 C-3PO    167   75.0          &lt;NA&gt;                gold
 3:                 R2-D2     96   32.0          &lt;NA&gt;         white, blue
 4:           Darth Vader    202  136.0          none               white
 5:           Leia Organa    150   49.0         brown               light
 6:             Owen Lars    178  120.0   brown, grey               light
 7:    Beru Whitesun Lars    165   75.0         brown               light
 8:                 R5-D4     97   32.0          &lt;NA&gt;          white, red
 9:     Biggs Darklighter    183   84.0         black               light
10:        Obi-Wan Kenobi    182   77.0 auburn, white                fair
11:      Anakin Skywalker    188   84.0         blond                fair
12:        Wilhuff Tarkin    180     NA  auburn, grey                fair
13:             Chewbacca    228  112.0         brown             unknown
14:              Han Solo    180   80.0         brown                fair
15:                Greedo    173   74.0          &lt;NA&gt;               green
16: Jabba Desilijic Tiure    175 1358.0          &lt;NA&gt;    green-tan, brown
17:        Wedge Antilles    170   77.0         brown                fair
18:      Jek Tono Porkins    180  110.0         brown                fair
19:                  Yoda     66   17.0         white               green
20:             Palpatine    170   75.0          grey                pale
21:             Boba Fett    183   78.2         black                fair
22:                 IG-88    200  140.0          none               metal
23:                 Bossk    190  113.0          none               green
24:      Lando Calrissian    177   79.0         black                dark
25:                 Lobot    175   79.0          none               light
26:                Ackbar    180   83.0          none        brown mottle
27:            Mon Mothma    150     NA        auburn                fair
28:          Arvel Crynyd     NA     NA         brown                fair
29: Wicket Systri Warrick     88   20.0         brown               brown
30:             Nien Nunb    160   68.0          none                grey
31:          Qui-Gon Jinn    193   89.0         brown                fair
32:           Nute Gunray    191   90.0          none       mottled green
33:         Finis Valorum    170     NA         blond                fair
34:         Padmé Amidala    185   45.0         brown               light
35:         Jar Jar Binks    196   66.0          none              orange
36:          Roos Tarpals    224   82.0          none                grey
37:            Rugor Nass    206     NA          none               green
38:              Ric Olié    183     NA         brown                fair
39:                 Watto    137     NA         black          blue, grey
40:               Sebulba    112   40.0          none           grey, red
41:         Quarsh Panaka    183     NA         black                dark
42:        Shmi Skywalker    163     NA         black                fair
43:            Darth Maul    175   80.0          none                 red
44:           Bib Fortuna    180     NA          none                pale
45:           Ayla Secura    178   55.0          none                blue
46:          Ratts Tyerel     79   15.0          none          grey, blue
47:              Dud Bolt     94   45.0          none          blue, grey
48:               Gasgano    122     NA          none         white, blue
49:        Ben Quadinaros    163   65.0          none grey, green, yellow
50:            Mace Windu    188   84.0          none                dark
51:          Ki-Adi-Mundi    198   82.0         white                pale
52:             Kit Fisto    196   87.0          none               green
53:             Eeth Koth    171     NA         black               brown
54:            Adi Gallia    184   50.0          none                dark
55:           Saesee Tiin    188     NA          none                pale
56:           Yarael Poof    264     NA          none               white
57:              Plo Koon    188   80.0          none              orange
58:            Mas Amedda    196     NA          none                blue
59:          Gregar Typho    185   85.0         black                dark
60:                 Cordé    157     NA         brown               light
61:           Cliegg Lars    183     NA         brown                fair
62:     Poggle the Lesser    183   80.0          none               green
63:       Luminara Unduli    170   56.2         black              yellow
64:         Barriss Offee    166   50.0         black              yellow
65:                 Dormé    165     NA         brown               light
66:                 Dooku    193   80.0         white                fair
67:   Bail Prestor Organa    191     NA         black                 tan
68:            Jango Fett    183   79.0         black                 tan
69:            Zam Wesell    168   55.0        blonde fair, green, yellow
70:       Dexter Jettster    198  102.0          none               brown
71:               Lama Su    229   88.0          none                grey
72:               Taun We    213     NA          none                grey
73:            Jocasta Nu    167     NA         white                fair
74:                R4-P17     96     NA          none         silver, red
75:            Wat Tambor    193   48.0          none         green, grey
76:              San Hill    191     NA          none                grey
77:              Shaak Ti    178   57.0          none    red, blue, white
78:              Grievous    216  159.0          none        brown, white
79:               Tarfful    234  136.0         brown               brown
80:       Raymus Antilles    188   79.0         brown               light
81:             Sly Moore    178   48.0          none                pale
82:            Tion Medon    206   80.0          none                grey
83:                  Finn     NA     NA         black                dark
84:                   Rey     NA     NA         brown               light
85:           Poe Dameron     NA     NA         brown               light
86:                   BB8     NA     NA          none                none
87:        Captain Phasma     NA     NA          none                none
                     name height   mass    hair_color          skin_color
        eye_color birth_year            sex    gender      homeworld
 1:          blue       19.0           male masculine       Tatooine
 2:        yellow      112.0           none masculine       Tatooine
 3:           red       33.0           none masculine          Naboo
 4:        yellow       41.9           male masculine       Tatooine
 5:         brown       19.0         female  feminine       Alderaan
 6:          blue       52.0           male masculine       Tatooine
 7:          blue       47.0         female  feminine       Tatooine
 8:           red         NA           none masculine       Tatooine
 9:         brown       24.0           male masculine       Tatooine
10:     blue-gray       57.0           male masculine        Stewjon
11:          blue       41.9           male masculine       Tatooine
12:          blue       64.0           male masculine         Eriadu
13:          blue      200.0           male masculine       Kashyyyk
14:         brown       29.0           male masculine       Corellia
15:         black       44.0           male masculine          Rodia
16:        orange      600.0 hermaphroditic masculine      Nal Hutta
17:         hazel       21.0           male masculine       Corellia
18:          blue         NA           &lt;NA&gt;      &lt;NA&gt;     Bestine IV
19:         brown      896.0           male masculine           &lt;NA&gt;
20:        yellow       82.0           male masculine          Naboo
21:         brown       31.5           male masculine         Kamino
22:           red       15.0           none masculine           &lt;NA&gt;
23:           red       53.0           male masculine      Trandosha
24:         brown       31.0           male masculine        Socorro
25:          blue       37.0           male masculine         Bespin
26:        orange       41.0           male masculine       Mon Cala
27:          blue       48.0         female  feminine      Chandrila
28:         brown         NA           male masculine           &lt;NA&gt;
29:         brown        8.0           male masculine          Endor
30:         black         NA           male masculine        Sullust
31:          blue       92.0           male masculine           &lt;NA&gt;
32:           red         NA           male masculine Cato Neimoidia
33:          blue       91.0           male masculine      Coruscant
34:         brown       46.0         female  feminine          Naboo
35:        orange       52.0           male masculine          Naboo
36:        orange         NA           male masculine          Naboo
37:        orange         NA           male masculine          Naboo
38:          blue         NA           male masculine          Naboo
39:        yellow         NA           male masculine       Toydaria
40:        orange         NA           male masculine      Malastare
41:         brown       62.0           male masculine          Naboo
42:         brown       72.0         female  feminine       Tatooine
43:        yellow       54.0           male masculine       Dathomir
44:          pink         NA           male masculine         Ryloth
45:         hazel       48.0         female  feminine         Ryloth
46:       unknown         NA           male masculine    Aleen Minor
47:        yellow         NA           male masculine        Vulpter
48:         black         NA           male masculine        Troiken
49:        orange         NA           male masculine           Tund
50:         brown       72.0           male masculine     Haruun Kal
51:        yellow       92.0           male masculine          Cerea
52:         black         NA           male masculine    Glee Anselm
53:         brown         NA           male masculine       Iridonia
54:          blue         NA         female  feminine      Coruscant
55:        orange         NA           male masculine        Iktotch
56:        yellow         NA           male masculine        Quermia
57:         black       22.0           male masculine          Dorin
58:          blue         NA           male masculine       Champala
59:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
60:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
61:          blue       82.0           male masculine       Tatooine
62:        yellow         NA           male masculine       Geonosis
63:          blue       58.0         female  feminine         Mirial
64:          blue       40.0         female  feminine         Mirial
65:         brown         NA         female  feminine          Naboo
66:         brown      102.0           male masculine        Serenno
67:         brown       67.0           male masculine       Alderaan
68:         brown       66.0           male masculine   Concord Dawn
69:        yellow         NA         female  feminine          Zolan
70:        yellow         NA           male masculine           Ojom
71:         black         NA           male masculine         Kamino
72:         black         NA         female  feminine         Kamino
73:          blue         NA         female  feminine      Coruscant
74:     red, blue         NA           none  feminine           &lt;NA&gt;
75:       unknown         NA           male masculine          Skako
76:          gold         NA           male masculine     Muunilinst
77:         black         NA         female  feminine          Shili
78: green, yellow         NA           male masculine          Kalee
79:          blue         NA           male masculine       Kashyyyk
80:         brown         NA           male masculine       Alderaan
81:         white         NA           &lt;NA&gt;      &lt;NA&gt;         Umbara
82:         black         NA           male masculine         Utapau
83:          dark         NA           male masculine           &lt;NA&gt;
84:         hazel         NA         female  feminine           &lt;NA&gt;
85:         brown         NA           male masculine           &lt;NA&gt;
86:         black         NA           none masculine           &lt;NA&gt;
87:       unknown         NA         female  feminine           &lt;NA&gt;
        eye_color birth_year            sex    gender      homeworld
           species
 1:          Human
 2:          Droid
 3:          Droid
 4:          Human
 5:          Human
 6:          Human
 7:          Human
 8:          Droid
 9:          Human
10:          Human
11:          Human
12:          Human
13:        Wookiee
14:          Human
15:         Rodian
16:           Hutt
17:          Human
18:           &lt;NA&gt;
19: Yoda's species
20:          Human
21:          Human
22:          Droid
23:     Trandoshan
24:          Human
25:          Human
26:   Mon Calamari
27:          Human
28:          Human
29:           Ewok
30:      Sullustan
31:          Human
32:      Neimodian
33:          Human
34:          Human
35:         Gungan
36:         Gungan
37:         Gungan
38:          Human
39:      Toydarian
40:            Dug
41:          Human
42:          Human
43:         Zabrak
44:        Twi'lek
45:        Twi'lek
46:         Aleena
47:     Vulptereen
48:          Xexto
49:          Toong
50:          Human
51:         Cerean
52:       Nautolan
53:         Zabrak
54:     Tholothian
55:       Iktotchi
56:       Quermian
57:        Kel Dor
58:       Chagrian
59:           &lt;NA&gt;
60:           &lt;NA&gt;
61:          Human
62:      Geonosian
63:       Mirialan
64:       Mirialan
65:          Human
66:          Human
67:          Human
68:          Human
69:       Clawdite
70:       Besalisk
71:       Kaminoan
72:       Kaminoan
73:          Human
74:          Droid
75:        Skakoan
76:           Muun
77:        Togruta
78:        Kaleesh
79:        Wookiee
80:          Human
81:           &lt;NA&gt;
82:         Pau'an
83:          Human
84:          Human
85:          Human
86:          Droid
87:          Human
           species
                                                                                                                    films
 1:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 2:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 3: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith,...
 4:                                             A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
 5:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 6:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 7:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 8:                                                                                                            A New Hope
 9:                                                                                                            A New Hope
10:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
11:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
12:                                                                                        A New Hope,Revenge of the Sith
13:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
14:                                               A New Hope,The Empire Strikes Back,Return of the Jedi,The Force Awakens
15:                                                                                                            A New Hope
16:                                                                      A New Hope,Return of the Jedi,The Phantom Menace
17:                                                                 A New Hope,The Empire Strikes Back,Return of the Jedi
18:                                                                                                            A New Hope
19:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
20:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
21:                                                       The Empire Strikes Back,Return of the Jedi,Attack of the Clones
22:                                                                                               The Empire Strikes Back
23:                                                                                               The Empire Strikes Back
24:                                                                            The Empire Strikes Back,Return of the Jedi
25:                                                                                               The Empire Strikes Back
26:                                                                                  Return of the Jedi,The Force Awakens
27:                                                                                                    Return of the Jedi
28:                                                                                                    Return of the Jedi
29:                                                                                                    Return of the Jedi
30:                                                                                                    Return of the Jedi
31:                                                                                                    The Phantom Menace
32:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
33:                                                                                                    The Phantom Menace
34:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
35:                                                                               The Phantom Menace,Attack of the Clones
36:                                                                                                    The Phantom Menace
37:                                                                                                    The Phantom Menace
38:                                                                                                    The Phantom Menace
39:                                                                               The Phantom Menace,Attack of the Clones
40:                                                                                                    The Phantom Menace
41:                                                                                                    The Phantom Menace
42:                                                                               The Phantom Menace,Attack of the Clones
43:                                                                                                    The Phantom Menace
44:                                                                                                    Return of the Jedi
45:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
46:                                                                                                    The Phantom Menace
47:                                                                                                    The Phantom Menace
48:                                                                                                    The Phantom Menace
49:                                                                                                    The Phantom Menace
50:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
51:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
52:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
53:                                                                                The Phantom Menace,Revenge of the Sith
54:                                                                                The Phantom Menace,Revenge of the Sith
55:                                                                                The Phantom Menace,Revenge of the Sith
56:                                                                                                    The Phantom Menace
57:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
58:                                                                               The Phantom Menace,Attack of the Clones
59:                                                                                                  Attack of the Clones
60:                                                                                                  Attack of the Clones
61:                                                                                                  Attack of the Clones
62:                                                                              Attack of the Clones,Revenge of the Sith
63:                                                                              Attack of the Clones,Revenge of the Sith
64:                                                                                                  Attack of the Clones
65:                                                                                                  Attack of the Clones
66:                                                                              Attack of the Clones,Revenge of the Sith
67:                                                                              Attack of the Clones,Revenge of the Sith
68:                                                                                                  Attack of the Clones
69:                                                                                                  Attack of the Clones
70:                                                                                                  Attack of the Clones
71:                                                                                                  Attack of the Clones
72:                                                                                                  Attack of the Clones
73:                                                                                                  Attack of the Clones
74:                                                                              Attack of the Clones,Revenge of the Sith
75:                                                                                                  Attack of the Clones
76:                                                                                                  Attack of the Clones
77:                                                                              Attack of the Clones,Revenge of the Sith
78:                                                                                                   Revenge of the Sith
79:                                                                                                   Revenge of the Sith
80:                                                                                        A New Hope,Revenge of the Sith
81:                                                                              Attack of the Clones,Revenge of the Sith
82:                                                                                                   Revenge of the Sith
83:                                                                                                     The Force Awakens
84:                                                                                                     The Force Awakens
85:                                                                                                     The Force Awakens
86:                                                                                                     The Force Awakens
87:                                                                                                     The Force Awakens
                                                                                                                    films
                               vehicles
 1:   Snowspeeder,Imperial Speeder Bike
 2:                                    
 3:                                    
 4:                                    
 5:               Imperial Speeder Bike
 6:                                    
 7:                                    
 8:                                    
 9:                                    
10:                     Tribubble bongo
11: Zephyr-G swoop bike,XJ-6 airspeeder
12:                                    
13:                               AT-ST
14:                                    
15:                                    
16:                                    
17:                         Snowspeeder
18:                                    
19:                                    
20:                                    
21:                                    
22:                                    
23:                                    
24:                                    
25:                                    
26:                                    
27:                                    
28:                                    
29:                                    
30:                                    
31:                     Tribubble bongo
32:                                    
33:                                    
34:                                    
35:                                    
36:                                    
37:                                    
38:                                    
39:                                    
40:                                    
41:                                    
42:                                    
43:                        Sith speeder
44:                                    
45:                                    
46:                                    
47:                                    
48:                                    
49:                                    
50:                                    
51:                                    
52:                                    
53:                                    
54:                                    
55:                                    
56:                                    
57:                                    
58:                                    
59:                                    
60:                                    
61:                                    
62:                                    
63:                                    
64:                                    
65:                                    
66:                    Flitknot speeder
67:                                    
68:                                    
69:          Koro-2 Exodrive airspeeder
70:                                    
71:                                    
72:                                    
73:                                    
74:                                    
75:                                    
76:                                    
77:                                    
78:         Tsmeu-6 personal wheel bike
79:                                    
80:                                    
81:                                    
82:                                    
83:                                    
84:                                    
85:                                    
86:                                    
87:                                    
                               vehicles
                                                                                               starships
 1:                                                                              X-wing,Imperial shuttle
 2:                                                                                                     
 3:                                                                                                     
 4:                                                                                      TIE Advanced x1
 5:                                                                                                     
 6:                                                                                                     
 7:                                                                                                     
 8:                                                                                                     
 9:                                                                                               X-wing
10: Jedi starfighter,Trade Federation cruiser,Naboo star skiff,Jedi Interceptor,Belbullab-22 starfighter
11:                                              Naboo fighter,Trade Federation cruiser,Jedi Interceptor
12:                                                                                                     
13:                                                                   Millennium Falcon,Imperial shuttle
14:                                                                   Millennium Falcon,Imperial shuttle
15:                                                                                                     
16:                                                                                                     
17:                                                                                               X-wing
18:                                                                                               X-wing
19:                                                                                                     
20:                                                                                                     
21:                                                                                              Slave 1
22:                                                                                                     
23:                                                                                                     
24:                                                                                    Millennium Falcon
25:                                                                                                     
26:                                                                                                     
27:                                                                                                     
28:                                                                                               A-wing
29:                                                                                                     
30:                                                                                    Millennium Falcon
31:                                                                                                     
32:                                                                                                     
33:                                                                                                     
34:                                                   Naboo fighter,H-type Nubian yacht,Naboo star skiff
35:                                                                                                     
36:                                                                                                     
37:                                                                                                     
38:                                                                                 Naboo Royal Starship
39:                                                                                                     
40:                                                                                                     
41:                                                                                                     
42:                                                                                                     
43:                                                                                             Scimitar
44:                                                                                                     
45:                                                                                                     
46:                                                                                                     
47:                                                                                                     
48:                                                                                                     
49:                                                                                                     
50:                                                                                                     
51:                                                                                                     
52:                                                                                                     
53:                                                                                                     
54:                                                                                                     
55:                                                                                                     
56:                                                                                                     
57:                                                                                     Jedi starfighter
58:                                                                                                     
59:                                                                                        Naboo fighter
60:                                                                                                     
61:                                                                                                     
62:                                                                                                     
63:                                                                                                     
64:                                                                                                     
65:                                                                                                     
66:                                                                                                     
67:                                                                                                     
68:                                                                                                     
69:                                                                                                     
70:                                                                                                     
71:                                                                                                     
72:                                                                                                     
73:                                                                                                     
74:                                                                                                     
75:                                                                                                     
76:                                                                                                     
77:                                                                                                     
78:                                                                             Belbullab-22 starfighter
79:                                                                                                     
80:                                                                                                     
81:                                                                                                     
82:                                                                                                     
83:                                                                                                     
84:                                                                                                     
85:                                                                                               X-wing
86:                                                                                                     
87:                                                                                                     
                                                                                               starships</code></pre>
</div>
</div>
<p>Observar que la presentación de la tabla en la consola es distinta a la de un tibble que a su vez era distinta a la de un data frame</p>
<p>Empezamos, nos quedamos solo con los personajes de Star Wars que son de Tatooine</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  name height mass  hair_color skin_color eye_color birth_year
 1:     Luke Skywalker    172   77       blond       fair      blue       19.0
 2:              C-3PO    167   75        &lt;NA&gt;       gold    yellow      112.0
 3:        Darth Vader    202  136        none      white    yellow       41.9
 4:          Owen Lars    178  120 brown, grey      light      blue       52.0
 5: Beru Whitesun Lars    165   75       brown      light      blue       47.0
 6:              R5-D4     97   32        &lt;NA&gt; white, red       red         NA
 7:  Biggs Darklighter    183   84       black      light     brown       24.0
 8:   Anakin Skywalker    188   84       blond       fair      blue       41.9
 9:     Shmi Skywalker    163   NA       black       fair     brown       72.0
10:        Cliegg Lars    183   NA       brown       fair      blue       82.0
       sex    gender homeworld species
 1:   male masculine  Tatooine   Human
 2:   none masculine  Tatooine   Droid
 3:   male masculine  Tatooine   Human
 4:   male masculine  Tatooine   Human
 5: female  feminine  Tatooine   Human
 6:   none masculine  Tatooine   Droid
 7:   male masculine  Tatooine   Human
 8:   male masculine  Tatooine   Human
 9: female  feminine  Tatooine   Human
10:   male masculine  Tatooine   Human
                                                                                                                films
 1:                       A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 2: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 3:                                         A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
 4:                                                               A New Hope,Attack of the Clones,Revenge of the Sith
 5:                                                               A New Hope,Attack of the Clones,Revenge of the Sith
 6:                                                                                                        A New Hope
 7:                                                                                                        A New Hope
 8:                                                       The Phantom Menace,Attack of the Clones,Revenge of the Sith
 9:                                                                           The Phantom Menace,Attack of the Clones
10:                                                                                              Attack of the Clones
                               vehicles
 1:   Snowspeeder,Imperial Speeder Bike
 2:                                    
 3:                                    
 4:                                    
 5:                                    
 6:                                    
 7:                                    
 8: Zephyr-G swoop bike,XJ-6 airspeeder
 9:                                    
10:                                    
                                                  starships
 1:                                 X-wing,Imperial shuttle
 2:                                                        
 3:                                         TIE Advanced x1
 4:                                                        
 5:                                                        
 6:                                                        
 7:                                                  X-wing
 8: Naboo fighter,Trade Federation cruiser,Jedi Interceptor
 9:                                                        
10:                                                        </code></pre>
</div>
</div>
<p>Que viva en Tatooine y sean de género masculino</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span> <span class="sc">&amp;</span> gender <span class="sc">==</span> <span class="st">"masculine"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                name height mass  hair_color skin_color eye_color birth_year
1:    Luke Skywalker    172   77       blond       fair      blue       19.0
2:             C-3PO    167   75        &lt;NA&gt;       gold    yellow      112.0
3:       Darth Vader    202  136        none      white    yellow       41.9
4:         Owen Lars    178  120 brown, grey      light      blue       52.0
5:             R5-D4     97   32        &lt;NA&gt; white, red       red         NA
6: Biggs Darklighter    183   84       black      light     brown       24.0
7:  Anakin Skywalker    188   84       blond       fair      blue       41.9
8:       Cliegg Lars    183   NA       brown       fair      blue       82.0
    sex    gender homeworld species
1: male masculine  Tatooine   Human
2: none masculine  Tatooine   Droid
3: male masculine  Tatooine   Human
4: male masculine  Tatooine   Human
5: none masculine  Tatooine   Droid
6: male masculine  Tatooine   Human
7: male masculine  Tatooine   Human
8: male masculine  Tatooine   Human
                                                                                                               films
1:                       A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
2: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
3:                                         A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
4:                                                               A New Hope,Attack of the Clones,Revenge of the Sith
5:                                                                                                        A New Hope
6:                                                                                                        A New Hope
7:                                                       The Phantom Menace,Attack of the Clones,Revenge of the Sith
8:                                                                                              Attack of the Clones
                              vehicles
1:   Snowspeeder,Imperial Speeder Bike
2:                                    
3:                                    
4:                                    
5:                                    
6:                                    
7: Zephyr-G swoop bike,XJ-6 airspeeder
8:                                    
                                                 starships
1:                                 X-wing,Imperial shuttle
2:                                                        
3:                                         TIE Advanced x1
4:                                                        
5:                                                        
6:                                                  X-wing
7: Naboo fighter,Trade Federation cruiser,Jedi Interceptor
8:                                                        </code></pre>
</div>
</div>
<p>Solo los registros que no sean humanos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[species <span class="sc">!=</span> <span class="st">"Human"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name height   mass hair_color          skin_color
 1:                 C-3PO    167   75.0       &lt;NA&gt;                gold
 2:                 R2-D2     96   32.0       &lt;NA&gt;         white, blue
 3:                 R5-D4     97   32.0       &lt;NA&gt;          white, red
 4:             Chewbacca    228  112.0      brown             unknown
 5:                Greedo    173   74.0       &lt;NA&gt;               green
 6: Jabba Desilijic Tiure    175 1358.0       &lt;NA&gt;    green-tan, brown
 7:                  Yoda     66   17.0      white               green
 8:                 IG-88    200  140.0       none               metal
 9:                 Bossk    190  113.0       none               green
10:                Ackbar    180   83.0       none        brown mottle
11: Wicket Systri Warrick     88   20.0      brown               brown
12:             Nien Nunb    160   68.0       none                grey
13:           Nute Gunray    191   90.0       none       mottled green
14:         Jar Jar Binks    196   66.0       none              orange
15:          Roos Tarpals    224   82.0       none                grey
16:            Rugor Nass    206     NA       none               green
17:                 Watto    137     NA      black          blue, grey
18:               Sebulba    112   40.0       none           grey, red
19:            Darth Maul    175   80.0       none                 red
20:           Bib Fortuna    180     NA       none                pale
21:           Ayla Secura    178   55.0       none                blue
22:          Ratts Tyerel     79   15.0       none          grey, blue
23:              Dud Bolt     94   45.0       none          blue, grey
24:               Gasgano    122     NA       none         white, blue
25:        Ben Quadinaros    163   65.0       none grey, green, yellow
26:          Ki-Adi-Mundi    198   82.0      white                pale
27:             Kit Fisto    196   87.0       none               green
28:             Eeth Koth    171     NA      black               brown
29:            Adi Gallia    184   50.0       none                dark
30:           Saesee Tiin    188     NA       none                pale
31:           Yarael Poof    264     NA       none               white
32:              Plo Koon    188   80.0       none              orange
33:            Mas Amedda    196     NA       none                blue
34:     Poggle the Lesser    183   80.0       none               green
35:       Luminara Unduli    170   56.2      black              yellow
36:         Barriss Offee    166   50.0      black              yellow
37:            Zam Wesell    168   55.0     blonde fair, green, yellow
38:       Dexter Jettster    198  102.0       none               brown
39:               Lama Su    229   88.0       none                grey
40:               Taun We    213     NA       none                grey
41:                R4-P17     96     NA       none         silver, red
42:            Wat Tambor    193   48.0       none         green, grey
43:              San Hill    191     NA       none                grey
44:              Shaak Ti    178   57.0       none    red, blue, white
45:              Grievous    216  159.0       none        brown, white
46:               Tarfful    234  136.0      brown               brown
47:            Tion Medon    206   80.0       none                grey
48:                   BB8     NA     NA       none                none
                     name height   mass hair_color          skin_color
        eye_color birth_year            sex    gender      homeworld
 1:        yellow        112           none masculine       Tatooine
 2:           red         33           none masculine          Naboo
 3:           red         NA           none masculine       Tatooine
 4:          blue        200           male masculine       Kashyyyk
 5:         black         44           male masculine          Rodia
 6:        orange        600 hermaphroditic masculine      Nal Hutta
 7:         brown        896           male masculine           &lt;NA&gt;
 8:           red         15           none masculine           &lt;NA&gt;
 9:           red         53           male masculine      Trandosha
10:        orange         41           male masculine       Mon Cala
11:         brown          8           male masculine          Endor
12:         black         NA           male masculine        Sullust
13:           red         NA           male masculine Cato Neimoidia
14:        orange         52           male masculine          Naboo
15:        orange         NA           male masculine          Naboo
16:        orange         NA           male masculine          Naboo
17:        yellow         NA           male masculine       Toydaria
18:        orange         NA           male masculine      Malastare
19:        yellow         54           male masculine       Dathomir
20:          pink         NA           male masculine         Ryloth
21:         hazel         48         female  feminine         Ryloth
22:       unknown         NA           male masculine    Aleen Minor
23:        yellow         NA           male masculine        Vulpter
24:         black         NA           male masculine        Troiken
25:        orange         NA           male masculine           Tund
26:        yellow         92           male masculine          Cerea
27:         black         NA           male masculine    Glee Anselm
28:         brown         NA           male masculine       Iridonia
29:          blue         NA         female  feminine      Coruscant
30:        orange         NA           male masculine        Iktotch
31:        yellow         NA           male masculine        Quermia
32:         black         22           male masculine          Dorin
33:          blue         NA           male masculine       Champala
34:        yellow         NA           male masculine       Geonosis
35:          blue         58         female  feminine         Mirial
36:          blue         40         female  feminine         Mirial
37:        yellow         NA         female  feminine          Zolan
38:        yellow         NA           male masculine           Ojom
39:         black         NA           male masculine         Kamino
40:         black         NA         female  feminine         Kamino
41:     red, blue         NA           none  feminine           &lt;NA&gt;
42:       unknown         NA           male masculine          Skako
43:          gold         NA           male masculine     Muunilinst
44:         black         NA         female  feminine          Shili
45: green, yellow         NA           male masculine          Kalee
46:          blue         NA           male masculine       Kashyyyk
47:         black         NA           male masculine         Utapau
48:         black         NA           none masculine           &lt;NA&gt;
        eye_color birth_year            sex    gender      homeworld
           species
 1:          Droid
 2:          Droid
 3:          Droid
 4:        Wookiee
 5:         Rodian
 6:           Hutt
 7: Yoda's species
 8:          Droid
 9:     Trandoshan
10:   Mon Calamari
11:           Ewok
12:      Sullustan
13:      Neimodian
14:         Gungan
15:         Gungan
16:         Gungan
17:      Toydarian
18:            Dug
19:         Zabrak
20:        Twi'lek
21:        Twi'lek
22:         Aleena
23:     Vulptereen
24:          Xexto
25:          Toong
26:         Cerean
27:       Nautolan
28:         Zabrak
29:     Tholothian
30:       Iktotchi
31:       Quermian
32:        Kel Dor
33:       Chagrian
34:      Geonosian
35:       Mirialan
36:       Mirialan
37:       Clawdite
38:       Besalisk
39:       Kaminoan
40:       Kaminoan
41:          Droid
42:        Skakoan
43:           Muun
44:        Togruta
45:        Kaleesh
46:        Wookiee
47:         Pau'an
48:          Droid
           species
                                                                                                                    films
 1:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 2: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith,...
 3:                                                                                                            A New Hope
 4:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 5:                                                                                                            A New Hope
 6:                                                                      A New Hope,Return of the Jedi,The Phantom Menace
 7:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 8:                                                                                               The Empire Strikes Back
 9:                                                                                               The Empire Strikes Back
10:                                                                                  Return of the Jedi,The Force Awakens
11:                                                                                                    Return of the Jedi
12:                                                                                                    Return of the Jedi
13:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
14:                                                                               The Phantom Menace,Attack of the Clones
15:                                                                                                    The Phantom Menace
16:                                                                                                    The Phantom Menace
17:                                                                               The Phantom Menace,Attack of the Clones
18:                                                                                                    The Phantom Menace
19:                                                                                                    The Phantom Menace
20:                                                                                                    Return of the Jedi
21:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
22:                                                                                                    The Phantom Menace
23:                                                                                                    The Phantom Menace
24:                                                                                                    The Phantom Menace
25:                                                                                                    The Phantom Menace
26:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
27:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
28:                                                                                The Phantom Menace,Revenge of the Sith
29:                                                                                The Phantom Menace,Revenge of the Sith
30:                                                                                The Phantom Menace,Revenge of the Sith
31:                                                                                                    The Phantom Menace
32:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
33:                                                                               The Phantom Menace,Attack of the Clones
34:                                                                              Attack of the Clones,Revenge of the Sith
35:                                                                              Attack of the Clones,Revenge of the Sith
36:                                                                                                  Attack of the Clones
37:                                                                                                  Attack of the Clones
38:                                                                                                  Attack of the Clones
39:                                                                                                  Attack of the Clones
40:                                                                                                  Attack of the Clones
41:                                                                              Attack of the Clones,Revenge of the Sith
42:                                                                                                  Attack of the Clones
43:                                                                                                  Attack of the Clones
44:                                                                              Attack of the Clones,Revenge of the Sith
45:                                                                                                   Revenge of the Sith
46:                                                                                                   Revenge of the Sith
47:                                                                                                   Revenge of the Sith
48:                                                                                                     The Force Awakens
                                                                                                                    films
                       vehicles                          starships
 1:                                                               
 2:                                                               
 3:                                                               
 4:                       AT-ST Millennium Falcon,Imperial shuttle
 5:                                                               
 6:                                                               
 7:                                                               
 8:                                                               
 9:                                                               
10:                                                               
11:                                                               
12:                                              Millennium Falcon
13:                                                               
14:                                                               
15:                                                               
16:                                                               
17:                                                               
18:                                                               
19:                Sith speeder                           Scimitar
20:                                                               
21:                                                               
22:                                                               
23:                                                               
24:                                                               
25:                                                               
26:                                                               
27:                                                               
28:                                                               
29:                                                               
30:                                                               
31:                                                               
32:                                               Jedi starfighter
33:                                                               
34:                                                               
35:                                                               
36:                                                               
37:  Koro-2 Exodrive airspeeder                                   
38:                                                               
39:                                                               
40:                                                               
41:                                                               
42:                                                               
43:                                                               
44:                                                               
45: Tsmeu-6 personal wheel bike           Belbullab-22 starfighter
46:                                                               
47:                                                               
48:                                                               
                       vehicles                          starships</code></pre>
</div>
</div>
<p>También podemos seleccionar filas por posición, por ejemplo las 6 primeras filas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             name height mass  hair_color  skin_color eye_color birth_year
1: Luke Skywalker    172   77       blond        fair      blue       19.0
2:          C-3PO    167   75        &lt;NA&gt;        gold    yellow      112.0
3:          R2-D2     96   32        &lt;NA&gt; white, blue       red       33.0
4:    Darth Vader    202  136        none       white    yellow       41.9
5:    Leia Organa    150   49       brown       light     brown       19.0
6:      Owen Lars    178  120 brown, grey       light      blue       52.0
      sex    gender homeworld species
1:   male masculine  Tatooine   Human
2:   none masculine  Tatooine   Droid
3:   none masculine     Naboo   Droid
4:   male masculine  Tatooine   Human
5: female  feminine  Alderaan   Human
6:   male masculine  Tatooine   Human
                                                                                                                   films
1:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
2:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
3: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith,...
4:                                             A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
5:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
6:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
                            vehicles               starships
1: Snowspeeder,Imperial Speeder Bike X-wing,Imperial shuttle
2:                                                          
3:                                                          
4:                                           TIE Advanced x1
5:             Imperial Speeder Bike                        
6:                                                          </code></pre>
</div>
</div>
<p>Ahora seleccionamos columnas, recordar que para eso debemos usar el segundo argumento</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>, <span class="fu">list</span>(name)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  name
 1:     Luke Skywalker
 2:              C-3PO
 3:        Darth Vader
 4:          Owen Lars
 5: Beru Whitesun Lars
 6:              R5-D4
 7:  Biggs Darklighter
 8:   Anakin Skywalker
 9:     Shmi Skywalker
10:        Cliegg Lars</code></pre>
</div>
</div>
<p>Tenemos que pasar los nombres de las columnas como una lista, afortunadamente podemos usar el alias <code>.</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>, .(name)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  name
 1:     Luke Skywalker
 2:              C-3PO
 3:        Darth Vader
 4:          Owen Lars
 5: Beru Whitesun Lars
 6:              R5-D4
 7:  Biggs Darklighter
 8:   Anakin Skywalker
 9:     Shmi Skywalker
10:        Cliegg Lars</code></pre>
</div>
</div>
<p>Si pasamos el nombre solamente, nos devuelve un vector en lugar de un data table</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>, name]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Luke Skywalker"     "C-3PO"              "Darth Vader"       
 [4] "Owen Lars"          "Beru Whitesun Lars" "R5-D4"             
 [7] "Biggs Darklighter"  "Anakin Skywalker"   "Shmi Skywalker"    
[10] "Cliegg Lars"       </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pruebe lo anterior con dos columnas, ¿Qué devuelve? ¿Tiene lógica?</p>
<p>Ahora intente con tres columnas ¿Por qué cree que tiene un error?</p>
<p>Intente lo anterior pasando un vector de caracteres con los nombres de las columnas que desea seleccionar</p>
</div>
</div>
<p>Más columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>, .(name, height, species)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  name height species
 1:     Luke Skywalker    172   Human
 2:              C-3PO    167   Droid
 3:        Darth Vader    202   Human
 4:          Owen Lars    178   Human
 5: Beru Whitesun Lars    165   Human
 6:              R5-D4     97   Droid
 7:  Biggs Darklighter    183   Human
 8:   Anakin Skywalker    188   Human
 9:     Shmi Skywalker    163   Human
10:        Cliegg Lars    183   Human</code></pre>
</div>
</div>
<p>Si deseamos ordenar el data table según alguna columna en particular</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, .(name, mass)][<span class="fu">order</span>(mass)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name   mass
 1:          Ratts Tyerel   15.0
 2:                  Yoda   17.0
 3: Wicket Systri Warrick   20.0
 4:                 R2-D2   32.0
 5:                 R5-D4   32.0
 6:               Sebulba   40.0
 7:         Padmé Amidala   45.0
 8:              Dud Bolt   45.0
 9:            Wat Tambor   48.0
10:             Sly Moore   48.0
11:           Leia Organa   49.0
12:            Adi Gallia   50.0
13:         Barriss Offee   50.0
14:           Ayla Secura   55.0
15:            Zam Wesell   55.0
16:       Luminara Unduli   56.2
17:              Shaak Ti   57.0
18:        Ben Quadinaros   65.0
19:         Jar Jar Binks   66.0
20:             Nien Nunb   68.0
21:                Greedo   74.0
22:                 C-3PO   75.0
23:    Beru Whitesun Lars   75.0
24:             Palpatine   75.0
25:        Luke Skywalker   77.0
26:        Obi-Wan Kenobi   77.0
27:        Wedge Antilles   77.0
28:             Boba Fett   78.2
29:      Lando Calrissian   79.0
30:                 Lobot   79.0
31:            Jango Fett   79.0
32:       Raymus Antilles   79.0
33:              Han Solo   80.0
34:            Darth Maul   80.0
35:              Plo Koon   80.0
36:     Poggle the Lesser   80.0
37:                 Dooku   80.0
38:            Tion Medon   80.0
39:          Roos Tarpals   82.0
40:          Ki-Adi-Mundi   82.0
41:                Ackbar   83.0
42:     Biggs Darklighter   84.0
43:      Anakin Skywalker   84.0
44:            Mace Windu   84.0
45:          Gregar Typho   85.0
46:             Kit Fisto   87.0
47:               Lama Su   88.0
48:          Qui-Gon Jinn   89.0
49:           Nute Gunray   90.0
50:       Dexter Jettster  102.0
51:      Jek Tono Porkins  110.0
52:             Chewbacca  112.0
53:                 Bossk  113.0
54:             Owen Lars  120.0
55:           Darth Vader  136.0
56:               Tarfful  136.0
57:                 IG-88  140.0
58:              Grievous  159.0
59: Jabba Desilijic Tiure 1358.0
60:        Wilhuff Tarkin     NA
61:            Mon Mothma     NA
62:          Arvel Crynyd     NA
63:         Finis Valorum     NA
64:            Rugor Nass     NA
65:              Ric Olié     NA
66:                 Watto     NA
67:         Quarsh Panaka     NA
68:        Shmi Skywalker     NA
69:           Bib Fortuna     NA
70:               Gasgano     NA
71:             Eeth Koth     NA
72:           Saesee Tiin     NA
73:           Yarael Poof     NA
74:            Mas Amedda     NA
75:                 Cordé     NA
76:           Cliegg Lars     NA
77:                 Dormé     NA
78:   Bail Prestor Organa     NA
79:               Taun We     NA
80:            Jocasta Nu     NA
81:                R4-P17     NA
82:              San Hill     NA
83:                  Finn     NA
84:                   Rey     NA
85:           Poe Dameron     NA
86:                   BB8     NA
87:        Captain Phasma     NA
                     name   mass</code></pre>
</div>
</div>
<p>Observamos dos cosas nuevas:</p>
<p>La primera, si no vamos a realizar una operación sobre las filas, la <em>casilla</em> de ese argumento queda en blanco, y en el segundo argumento seleccionamos las columnas.</p>
<p>Lo segundo, una vez seleccionadas las columnas de interés, queremos operar sobre las filas, asi que necesitamos <em>encadenar</em> esa operación abriendo unos nuevos corchetes y operando sobre el primer argumento que es de la fila.</p>
<p>Para ordenar de manera descendente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, .(name, mass)][<span class="fu">order</span>(<span class="sc">-</span>mass)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name   mass
 1: Jabba Desilijic Tiure 1358.0
 2:              Grievous  159.0
 3:                 IG-88  140.0
 4:           Darth Vader  136.0
 5:               Tarfful  136.0
 6:             Owen Lars  120.0
 7:                 Bossk  113.0
 8:             Chewbacca  112.0
 9:      Jek Tono Porkins  110.0
10:       Dexter Jettster  102.0
11:           Nute Gunray   90.0
12:          Qui-Gon Jinn   89.0
13:               Lama Su   88.0
14:             Kit Fisto   87.0
15:          Gregar Typho   85.0
16:     Biggs Darklighter   84.0
17:      Anakin Skywalker   84.0
18:            Mace Windu   84.0
19:                Ackbar   83.0
20:          Roos Tarpals   82.0
21:          Ki-Adi-Mundi   82.0
22:              Han Solo   80.0
23:            Darth Maul   80.0
24:              Plo Koon   80.0
25:     Poggle the Lesser   80.0
26:                 Dooku   80.0
27:            Tion Medon   80.0
28:      Lando Calrissian   79.0
29:                 Lobot   79.0
30:            Jango Fett   79.0
31:       Raymus Antilles   79.0
32:             Boba Fett   78.2
33:        Luke Skywalker   77.0
34:        Obi-Wan Kenobi   77.0
35:        Wedge Antilles   77.0
36:                 C-3PO   75.0
37:    Beru Whitesun Lars   75.0
38:             Palpatine   75.0
39:                Greedo   74.0
40:             Nien Nunb   68.0
41:         Jar Jar Binks   66.0
42:        Ben Quadinaros   65.0
43:              Shaak Ti   57.0
44:       Luminara Unduli   56.2
45:           Ayla Secura   55.0
46:            Zam Wesell   55.0
47:            Adi Gallia   50.0
48:         Barriss Offee   50.0
49:           Leia Organa   49.0
50:            Wat Tambor   48.0
51:             Sly Moore   48.0
52:         Padmé Amidala   45.0
53:              Dud Bolt   45.0
54:               Sebulba   40.0
55:                 R2-D2   32.0
56:                 R5-D4   32.0
57: Wicket Systri Warrick   20.0
58:                  Yoda   17.0
59:          Ratts Tyerel   15.0
60:        Wilhuff Tarkin     NA
61:            Mon Mothma     NA
62:          Arvel Crynyd     NA
63:         Finis Valorum     NA
64:            Rugor Nass     NA
65:              Ric Olié     NA
66:                 Watto     NA
67:         Quarsh Panaka     NA
68:        Shmi Skywalker     NA
69:           Bib Fortuna     NA
70:               Gasgano     NA
71:             Eeth Koth     NA
72:           Saesee Tiin     NA
73:           Yarael Poof     NA
74:            Mas Amedda     NA
75:                 Cordé     NA
76:           Cliegg Lars     NA
77:                 Dormé     NA
78:   Bail Prestor Organa     NA
79:               Taun We     NA
80:            Jocasta Nu     NA
81:                R4-P17     NA
82:              San Hill     NA
83:                  Finn     NA
84:                   Rey     NA
85:           Poe Dameron     NA
86:                   BB8     NA
87:        Captain Phasma     NA
                     name   mass</code></pre>
</div>
</div>
<p>Para seleccionar solo las columnas que cumplan una determinada condición, por ejemplo, si deseamos solo las columnas que contengan variables numéricas, la operación es algo más verbosa</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, .SD, .SDcols <span class="ot">=</span> is.numeric]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    height   mass birth_year
 1:    172   77.0       19.0
 2:    167   75.0      112.0
 3:     96   32.0       33.0
 4:    202  136.0       41.9
 5:    150   49.0       19.0
 6:    178  120.0       52.0
 7:    165   75.0       47.0
 8:     97   32.0         NA
 9:    183   84.0       24.0
10:    182   77.0       57.0
11:    188   84.0       41.9
12:    180     NA       64.0
13:    228  112.0      200.0
14:    180   80.0       29.0
15:    173   74.0       44.0
16:    175 1358.0      600.0
17:    170   77.0       21.0
18:    180  110.0         NA
19:     66   17.0      896.0
20:    170   75.0       82.0
21:    183   78.2       31.5
22:    200  140.0       15.0
23:    190  113.0       53.0
24:    177   79.0       31.0
25:    175   79.0       37.0
26:    180   83.0       41.0
27:    150     NA       48.0
28:     NA     NA         NA
29:     88   20.0        8.0
30:    160   68.0         NA
31:    193   89.0       92.0
32:    191   90.0         NA
33:    170     NA       91.0
34:    185   45.0       46.0
35:    196   66.0       52.0
36:    224   82.0         NA
37:    206     NA         NA
38:    183     NA         NA
39:    137     NA         NA
40:    112   40.0         NA
41:    183     NA       62.0
42:    163     NA       72.0
43:    175   80.0       54.0
44:    180     NA         NA
45:    178   55.0       48.0
46:     79   15.0         NA
47:     94   45.0         NA
48:    122     NA         NA
49:    163   65.0         NA
50:    188   84.0       72.0
51:    198   82.0       92.0
52:    196   87.0         NA
53:    171     NA         NA
54:    184   50.0         NA
55:    188     NA         NA
56:    264     NA         NA
57:    188   80.0       22.0
58:    196     NA         NA
59:    185   85.0         NA
60:    157     NA         NA
61:    183     NA       82.0
62:    183   80.0         NA
63:    170   56.2       58.0
64:    166   50.0       40.0
65:    165     NA         NA
66:    193   80.0      102.0
67:    191     NA       67.0
68:    183   79.0       66.0
69:    168   55.0         NA
70:    198  102.0         NA
71:    229   88.0         NA
72:    213     NA         NA
73:    167     NA         NA
74:     96     NA         NA
75:    193   48.0         NA
76:    191     NA         NA
77:    178   57.0         NA
78:    216  159.0         NA
79:    234  136.0         NA
80:    188   79.0         NA
81:    178   48.0         NA
82:    206   80.0         NA
83:     NA     NA         NA
84:     NA     NA         NA
85:     NA     NA         NA
86:     NA     NA         NA
87:     NA     NA         NA
    height   mass birth_year</code></pre>
</div>
</div>
<p>Acá introducimos dos elementos nuevos: <code>.SD</code> se emplea para hacer sub conjuntos del data table, definidos por las columnas enunciadas en <code>.SDcols</code>. A primera vista no es intuitivo, veremos un ejemplo menos trivial</p>
<p>Supongamos que queremos calcular la media de las columnas numéricas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, <span class="fu">lapply</span>(.SD, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), .SDcols <span class="ot">=</span> is.numeric]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     height     mass birth_year
1: 174.6049 97.31186   87.56512</code></pre>
</div>
</div>
<p>O solo a dos columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, <span class="fu">lapply</span>(.SD, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), .SDcols <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"height"</span>, <span class="st">"mass"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     height     mass
1: 174.6049 97.31186</code></pre>
</div>
</div>
<p>En data table creamos nuevas columnas transformando las existentes con <code>:=</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, H_W <span class="sc">:</span><span class="er">=</span> height <span class="sc">/</span> mass][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name height   mass    hair_color          skin_color
 1:        Luke Skywalker    172   77.0         blond                fair
 2:                 C-3PO    167   75.0          &lt;NA&gt;                gold
 3:                 R2-D2     96   32.0          &lt;NA&gt;         white, blue
 4:           Darth Vader    202  136.0          none               white
 5:           Leia Organa    150   49.0         brown               light
 6:             Owen Lars    178  120.0   brown, grey               light
 7:    Beru Whitesun Lars    165   75.0         brown               light
 8:                 R5-D4     97   32.0          &lt;NA&gt;          white, red
 9:     Biggs Darklighter    183   84.0         black               light
10:        Obi-Wan Kenobi    182   77.0 auburn, white                fair
11:      Anakin Skywalker    188   84.0         blond                fair
12:        Wilhuff Tarkin    180     NA  auburn, grey                fair
13:             Chewbacca    228  112.0         brown             unknown
14:              Han Solo    180   80.0         brown                fair
15:                Greedo    173   74.0          &lt;NA&gt;               green
16: Jabba Desilijic Tiure    175 1358.0          &lt;NA&gt;    green-tan, brown
17:        Wedge Antilles    170   77.0         brown                fair
18:      Jek Tono Porkins    180  110.0         brown                fair
19:                  Yoda     66   17.0         white               green
20:             Palpatine    170   75.0          grey                pale
21:             Boba Fett    183   78.2         black                fair
22:                 IG-88    200  140.0          none               metal
23:                 Bossk    190  113.0          none               green
24:      Lando Calrissian    177   79.0         black                dark
25:                 Lobot    175   79.0          none               light
26:                Ackbar    180   83.0          none        brown mottle
27:            Mon Mothma    150     NA        auburn                fair
28:          Arvel Crynyd     NA     NA         brown                fair
29: Wicket Systri Warrick     88   20.0         brown               brown
30:             Nien Nunb    160   68.0          none                grey
31:          Qui-Gon Jinn    193   89.0         brown                fair
32:           Nute Gunray    191   90.0          none       mottled green
33:         Finis Valorum    170     NA         blond                fair
34:         Padmé Amidala    185   45.0         brown               light
35:         Jar Jar Binks    196   66.0          none              orange
36:          Roos Tarpals    224   82.0          none                grey
37:            Rugor Nass    206     NA          none               green
38:              Ric Olié    183     NA         brown                fair
39:                 Watto    137     NA         black          blue, grey
40:               Sebulba    112   40.0          none           grey, red
41:         Quarsh Panaka    183     NA         black                dark
42:        Shmi Skywalker    163     NA         black                fair
43:            Darth Maul    175   80.0          none                 red
44:           Bib Fortuna    180     NA          none                pale
45:           Ayla Secura    178   55.0          none                blue
46:          Ratts Tyerel     79   15.0          none          grey, blue
47:              Dud Bolt     94   45.0          none          blue, grey
48:               Gasgano    122     NA          none         white, blue
49:        Ben Quadinaros    163   65.0          none grey, green, yellow
50:            Mace Windu    188   84.0          none                dark
51:          Ki-Adi-Mundi    198   82.0         white                pale
52:             Kit Fisto    196   87.0          none               green
53:             Eeth Koth    171     NA         black               brown
54:            Adi Gallia    184   50.0          none                dark
55:           Saesee Tiin    188     NA          none                pale
56:           Yarael Poof    264     NA          none               white
57:              Plo Koon    188   80.0          none              orange
58:            Mas Amedda    196     NA          none                blue
59:          Gregar Typho    185   85.0         black                dark
60:                 Cordé    157     NA         brown               light
61:           Cliegg Lars    183     NA         brown                fair
62:     Poggle the Lesser    183   80.0          none               green
63:       Luminara Unduli    170   56.2         black              yellow
64:         Barriss Offee    166   50.0         black              yellow
65:                 Dormé    165     NA         brown               light
66:                 Dooku    193   80.0         white                fair
67:   Bail Prestor Organa    191     NA         black                 tan
68:            Jango Fett    183   79.0         black                 tan
69:            Zam Wesell    168   55.0        blonde fair, green, yellow
70:       Dexter Jettster    198  102.0          none               brown
71:               Lama Su    229   88.0          none                grey
72:               Taun We    213     NA          none                grey
73:            Jocasta Nu    167     NA         white                fair
74:                R4-P17     96     NA          none         silver, red
75:            Wat Tambor    193   48.0          none         green, grey
76:              San Hill    191     NA          none                grey
77:              Shaak Ti    178   57.0          none    red, blue, white
78:              Grievous    216  159.0          none        brown, white
79:               Tarfful    234  136.0         brown               brown
80:       Raymus Antilles    188   79.0         brown               light
81:             Sly Moore    178   48.0          none                pale
82:            Tion Medon    206   80.0          none                grey
83:                  Finn     NA     NA         black                dark
84:                   Rey     NA     NA         brown               light
85:           Poe Dameron     NA     NA         brown               light
86:                   BB8     NA     NA          none                none
87:        Captain Phasma     NA     NA          none                none
                     name height   mass    hair_color          skin_color
        eye_color birth_year            sex    gender      homeworld
 1:          blue       19.0           male masculine       Tatooine
 2:        yellow      112.0           none masculine       Tatooine
 3:           red       33.0           none masculine          Naboo
 4:        yellow       41.9           male masculine       Tatooine
 5:         brown       19.0         female  feminine       Alderaan
 6:          blue       52.0           male masculine       Tatooine
 7:          blue       47.0         female  feminine       Tatooine
 8:           red         NA           none masculine       Tatooine
 9:         brown       24.0           male masculine       Tatooine
10:     blue-gray       57.0           male masculine        Stewjon
11:          blue       41.9           male masculine       Tatooine
12:          blue       64.0           male masculine         Eriadu
13:          blue      200.0           male masculine       Kashyyyk
14:         brown       29.0           male masculine       Corellia
15:         black       44.0           male masculine          Rodia
16:        orange      600.0 hermaphroditic masculine      Nal Hutta
17:         hazel       21.0           male masculine       Corellia
18:          blue         NA           &lt;NA&gt;      &lt;NA&gt;     Bestine IV
19:         brown      896.0           male masculine           &lt;NA&gt;
20:        yellow       82.0           male masculine          Naboo
21:         brown       31.5           male masculine         Kamino
22:           red       15.0           none masculine           &lt;NA&gt;
23:           red       53.0           male masculine      Trandosha
24:         brown       31.0           male masculine        Socorro
25:          blue       37.0           male masculine         Bespin
26:        orange       41.0           male masculine       Mon Cala
27:          blue       48.0         female  feminine      Chandrila
28:         brown         NA           male masculine           &lt;NA&gt;
29:         brown        8.0           male masculine          Endor
30:         black         NA           male masculine        Sullust
31:          blue       92.0           male masculine           &lt;NA&gt;
32:           red         NA           male masculine Cato Neimoidia
33:          blue       91.0           male masculine      Coruscant
34:         brown       46.0         female  feminine          Naboo
35:        orange       52.0           male masculine          Naboo
36:        orange         NA           male masculine          Naboo
37:        orange         NA           male masculine          Naboo
38:          blue         NA           male masculine          Naboo
39:        yellow         NA           male masculine       Toydaria
40:        orange         NA           male masculine      Malastare
41:         brown       62.0           male masculine          Naboo
42:         brown       72.0         female  feminine       Tatooine
43:        yellow       54.0           male masculine       Dathomir
44:          pink         NA           male masculine         Ryloth
45:         hazel       48.0         female  feminine         Ryloth
46:       unknown         NA           male masculine    Aleen Minor
47:        yellow         NA           male masculine        Vulpter
48:         black         NA           male masculine        Troiken
49:        orange         NA           male masculine           Tund
50:         brown       72.0           male masculine     Haruun Kal
51:        yellow       92.0           male masculine          Cerea
52:         black         NA           male masculine    Glee Anselm
53:         brown         NA           male masculine       Iridonia
54:          blue         NA         female  feminine      Coruscant
55:        orange         NA           male masculine        Iktotch
56:        yellow         NA           male masculine        Quermia
57:         black       22.0           male masculine          Dorin
58:          blue         NA           male masculine       Champala
59:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
60:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
61:          blue       82.0           male masculine       Tatooine
62:        yellow         NA           male masculine       Geonosis
63:          blue       58.0         female  feminine         Mirial
64:          blue       40.0         female  feminine         Mirial
65:         brown         NA         female  feminine          Naboo
66:         brown      102.0           male masculine        Serenno
67:         brown       67.0           male masculine       Alderaan
68:         brown       66.0           male masculine   Concord Dawn
69:        yellow         NA         female  feminine          Zolan
70:        yellow         NA           male masculine           Ojom
71:         black         NA           male masculine         Kamino
72:         black         NA         female  feminine         Kamino
73:          blue         NA         female  feminine      Coruscant
74:     red, blue         NA           none  feminine           &lt;NA&gt;
75:       unknown         NA           male masculine          Skako
76:          gold         NA           male masculine     Muunilinst
77:         black         NA         female  feminine          Shili
78: green, yellow         NA           male masculine          Kalee
79:          blue         NA           male masculine       Kashyyyk
80:         brown         NA           male masculine       Alderaan
81:         white         NA           &lt;NA&gt;      &lt;NA&gt;         Umbara
82:         black         NA           male masculine         Utapau
83:          dark         NA           male masculine           &lt;NA&gt;
84:         hazel         NA         female  feminine           &lt;NA&gt;
85:         brown         NA           male masculine           &lt;NA&gt;
86:         black         NA           none masculine           &lt;NA&gt;
87:       unknown         NA         female  feminine           &lt;NA&gt;
        eye_color birth_year            sex    gender      homeworld
           species
 1:          Human
 2:          Droid
 3:          Droid
 4:          Human
 5:          Human
 6:          Human
 7:          Human
 8:          Droid
 9:          Human
10:          Human
11:          Human
12:          Human
13:        Wookiee
14:          Human
15:         Rodian
16:           Hutt
17:          Human
18:           &lt;NA&gt;
19: Yoda's species
20:          Human
21:          Human
22:          Droid
23:     Trandoshan
24:          Human
25:          Human
26:   Mon Calamari
27:          Human
28:          Human
29:           Ewok
30:      Sullustan
31:          Human
32:      Neimodian
33:          Human
34:          Human
35:         Gungan
36:         Gungan
37:         Gungan
38:          Human
39:      Toydarian
40:            Dug
41:          Human
42:          Human
43:         Zabrak
44:        Twi'lek
45:        Twi'lek
46:         Aleena
47:     Vulptereen
48:          Xexto
49:          Toong
50:          Human
51:         Cerean
52:       Nautolan
53:         Zabrak
54:     Tholothian
55:       Iktotchi
56:       Quermian
57:        Kel Dor
58:       Chagrian
59:           &lt;NA&gt;
60:           &lt;NA&gt;
61:          Human
62:      Geonosian
63:       Mirialan
64:       Mirialan
65:          Human
66:          Human
67:          Human
68:          Human
69:       Clawdite
70:       Besalisk
71:       Kaminoan
72:       Kaminoan
73:          Human
74:          Droid
75:        Skakoan
76:           Muun
77:        Togruta
78:        Kaleesh
79:        Wookiee
80:          Human
81:           &lt;NA&gt;
82:         Pau'an
83:          Human
84:          Human
85:          Human
86:          Droid
87:          Human
           species
                                                                                                                    films
 1:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 2:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 3: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith,...
 4:                                             A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
 5:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 6:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 7:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 8:                                                                                                            A New Hope
 9:                                                                                                            A New Hope
10:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
11:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
12:                                                                                        A New Hope,Revenge of the Sith
13:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
14:                                               A New Hope,The Empire Strikes Back,Return of the Jedi,The Force Awakens
15:                                                                                                            A New Hope
16:                                                                      A New Hope,Return of the Jedi,The Phantom Menace
17:                                                                 A New Hope,The Empire Strikes Back,Return of the Jedi
18:                                                                                                            A New Hope
19:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
20:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
21:                                                       The Empire Strikes Back,Return of the Jedi,Attack of the Clones
22:                                                                                               The Empire Strikes Back
23:                                                                                               The Empire Strikes Back
24:                                                                            The Empire Strikes Back,Return of the Jedi
25:                                                                                               The Empire Strikes Back
26:                                                                                  Return of the Jedi,The Force Awakens
27:                                                                                                    Return of the Jedi
28:                                                                                                    Return of the Jedi
29:                                                                                                    Return of the Jedi
30:                                                                                                    Return of the Jedi
31:                                                                                                    The Phantom Menace
32:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
33:                                                                                                    The Phantom Menace
34:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
35:                                                                               The Phantom Menace,Attack of the Clones
36:                                                                                                    The Phantom Menace
37:                                                                                                    The Phantom Menace
38:                                                                                                    The Phantom Menace
39:                                                                               The Phantom Menace,Attack of the Clones
40:                                                                                                    The Phantom Menace
41:                                                                                                    The Phantom Menace
42:                                                                               The Phantom Menace,Attack of the Clones
43:                                                                                                    The Phantom Menace
44:                                                                                                    Return of the Jedi
45:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
46:                                                                                                    The Phantom Menace
47:                                                                                                    The Phantom Menace
48:                                                                                                    The Phantom Menace
49:                                                                                                    The Phantom Menace
50:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
51:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
52:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
53:                                                                                The Phantom Menace,Revenge of the Sith
54:                                                                                The Phantom Menace,Revenge of the Sith
55:                                                                                The Phantom Menace,Revenge of the Sith
56:                                                                                                    The Phantom Menace
57:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
58:                                                                               The Phantom Menace,Attack of the Clones
59:                                                                                                  Attack of the Clones
60:                                                                                                  Attack of the Clones
61:                                                                                                  Attack of the Clones
62:                                                                              Attack of the Clones,Revenge of the Sith
63:                                                                              Attack of the Clones,Revenge of the Sith
64:                                                                                                  Attack of the Clones
65:                                                                                                  Attack of the Clones
66:                                                                              Attack of the Clones,Revenge of the Sith
67:                                                                              Attack of the Clones,Revenge of the Sith
68:                                                                                                  Attack of the Clones
69:                                                                                                  Attack of the Clones
70:                                                                                                  Attack of the Clones
71:                                                                                                  Attack of the Clones
72:                                                                                                  Attack of the Clones
73:                                                                                                  Attack of the Clones
74:                                                                              Attack of the Clones,Revenge of the Sith
75:                                                                                                  Attack of the Clones
76:                                                                                                  Attack of the Clones
77:                                                                              Attack of the Clones,Revenge of the Sith
78:                                                                                                   Revenge of the Sith
79:                                                                                                   Revenge of the Sith
80:                                                                                        A New Hope,Revenge of the Sith
81:                                                                              Attack of the Clones,Revenge of the Sith
82:                                                                                                   Revenge of the Sith
83:                                                                                                     The Force Awakens
84:                                                                                                     The Force Awakens
85:                                                                                                     The Force Awakens
86:                                                                                                     The Force Awakens
87:                                                                                                     The Force Awakens
                                                                                                                    films
                               vehicles
 1:   Snowspeeder,Imperial Speeder Bike
 2:                                    
 3:                                    
 4:                                    
 5:               Imperial Speeder Bike
 6:                                    
 7:                                    
 8:                                    
 9:                                    
10:                     Tribubble bongo
11: Zephyr-G swoop bike,XJ-6 airspeeder
12:                                    
13:                               AT-ST
14:                                    
15:                                    
16:                                    
17:                         Snowspeeder
18:                                    
19:                                    
20:                                    
21:                                    
22:                                    
23:                                    
24:                                    
25:                                    
26:                                    
27:                                    
28:                                    
29:                                    
30:                                    
31:                     Tribubble bongo
32:                                    
33:                                    
34:                                    
35:                                    
36:                                    
37:                                    
38:                                    
39:                                    
40:                                    
41:                                    
42:                                    
43:                        Sith speeder
44:                                    
45:                                    
46:                                    
47:                                    
48:                                    
49:                                    
50:                                    
51:                                    
52:                                    
53:                                    
54:                                    
55:                                    
56:                                    
57:                                    
58:                                    
59:                                    
60:                                    
61:                                    
62:                                    
63:                                    
64:                                    
65:                                    
66:                    Flitknot speeder
67:                                    
68:                                    
69:          Koro-2 Exodrive airspeeder
70:                                    
71:                                    
72:                                    
73:                                    
74:                                    
75:                                    
76:                                    
77:                                    
78:         Tsmeu-6 personal wheel bike
79:                                    
80:                                    
81:                                    
82:                                    
83:                                    
84:                                    
85:                                    
86:                                    
87:                                    
                               vehicles
                                                                                               starships
 1:                                                                              X-wing,Imperial shuttle
 2:                                                                                                     
 3:                                                                                                     
 4:                                                                                      TIE Advanced x1
 5:                                                                                                     
 6:                                                                                                     
 7:                                                                                                     
 8:                                                                                                     
 9:                                                                                               X-wing
10: Jedi starfighter,Trade Federation cruiser,Naboo star skiff,Jedi Interceptor,Belbullab-22 starfighter
11:                                              Naboo fighter,Trade Federation cruiser,Jedi Interceptor
12:                                                                                                     
13:                                                                   Millennium Falcon,Imperial shuttle
14:                                                                   Millennium Falcon,Imperial shuttle
15:                                                                                                     
16:                                                                                                     
17:                                                                                               X-wing
18:                                                                                               X-wing
19:                                                                                                     
20:                                                                                                     
21:                                                                                              Slave 1
22:                                                                                                     
23:                                                                                                     
24:                                                                                    Millennium Falcon
25:                                                                                                     
26:                                                                                                     
27:                                                                                                     
28:                                                                                               A-wing
29:                                                                                                     
30:                                                                                    Millennium Falcon
31:                                                                                                     
32:                                                                                                     
33:                                                                                                     
34:                                                   Naboo fighter,H-type Nubian yacht,Naboo star skiff
35:                                                                                                     
36:                                                                                                     
37:                                                                                                     
38:                                                                                 Naboo Royal Starship
39:                                                                                                     
40:                                                                                                     
41:                                                                                                     
42:                                                                                                     
43:                                                                                             Scimitar
44:                                                                                                     
45:                                                                                                     
46:                                                                                                     
47:                                                                                                     
48:                                                                                                     
49:                                                                                                     
50:                                                                                                     
51:                                                                                                     
52:                                                                                                     
53:                                                                                                     
54:                                                                                                     
55:                                                                                                     
56:                                                                                                     
57:                                                                                     Jedi starfighter
58:                                                                                                     
59:                                                                                        Naboo fighter
60:                                                                                                     
61:                                                                                                     
62:                                                                                                     
63:                                                                                                     
64:                                                                                                     
65:                                                                                                     
66:                                                                                                     
67:                                                                                                     
68:                                                                                                     
69:                                                                                                     
70:                                                                                                     
71:                                                                                                     
72:                                                                                                     
73:                                                                                                     
74:                                                                                                     
75:                                                                                                     
76:                                                                                                     
77:                                                                                                     
78:                                                                             Belbullab-22 starfighter
79:                                                                                                     
80:                                                                                                     
81:                                                                                                     
82:                                                                                                     
83:                                                                                                     
84:                                                                                                     
85:                                                                                               X-wing
86:                                                                                                     
87:                                                                                                     
                                                                                               starships
         H_W
 1: 2.233766
 2: 2.226667
 3: 3.000000
 4: 1.485294
 5: 3.061224
 6: 1.483333
 7: 2.200000
 8: 3.031250
 9: 2.178571
10: 2.363636
11: 2.238095
12:       NA
13: 2.035714
14: 2.250000
15: 2.337838
16: 0.128866
17: 2.207792
18: 1.636364
19: 3.882353
20: 2.266667
21: 2.340153
22: 1.428571
23: 1.681416
24: 2.240506
25: 2.215190
26: 2.168675
27:       NA
28:       NA
29: 4.400000
30: 2.352941
31: 2.168539
32: 2.122222
33:       NA
34: 4.111111
35: 2.969697
36: 2.731707
37:       NA
38:       NA
39:       NA
40: 2.800000
41:       NA
42:       NA
43: 2.187500
44:       NA
45: 3.236364
46: 5.266667
47: 2.088889
48:       NA
49: 2.507692
50: 2.238095
51: 2.414634
52: 2.252874
53:       NA
54: 3.680000
55:       NA
56:       NA
57: 2.350000
58:       NA
59: 2.176471
60:       NA
61:       NA
62: 2.287500
63: 3.024911
64: 3.320000
65:       NA
66: 2.412500
67:       NA
68: 2.316456
69: 3.054545
70: 1.941176
71: 2.602273
72:       NA
73:       NA
74:       NA
75: 4.020833
76:       NA
77: 3.122807
78: 1.358491
79: 1.720588
80: 2.379747
81: 3.708333
82: 2.575000
83:       NA
84:       NA
85:       NA
86:       NA
87:       NA
         H_W</code></pre>
</div>
</div>
<p>Es posible crear varias columnas al mismo tiempo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, <span class="st">`</span><span class="at">:=</span><span class="st">`</span> (<span class="at">H_W =</span> height <span class="sc">/</span> mass,</span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">fakeVar =</span> <span class="fu">sqrt</span>(mass))][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     name height   mass    hair_color          skin_color
 1:        Luke Skywalker    172   77.0         blond                fair
 2:                 C-3PO    167   75.0          &lt;NA&gt;                gold
 3:                 R2-D2     96   32.0          &lt;NA&gt;         white, blue
 4:           Darth Vader    202  136.0          none               white
 5:           Leia Organa    150   49.0         brown               light
 6:             Owen Lars    178  120.0   brown, grey               light
 7:    Beru Whitesun Lars    165   75.0         brown               light
 8:                 R5-D4     97   32.0          &lt;NA&gt;          white, red
 9:     Biggs Darklighter    183   84.0         black               light
10:        Obi-Wan Kenobi    182   77.0 auburn, white                fair
11:      Anakin Skywalker    188   84.0         blond                fair
12:        Wilhuff Tarkin    180     NA  auburn, grey                fair
13:             Chewbacca    228  112.0         brown             unknown
14:              Han Solo    180   80.0         brown                fair
15:                Greedo    173   74.0          &lt;NA&gt;               green
16: Jabba Desilijic Tiure    175 1358.0          &lt;NA&gt;    green-tan, brown
17:        Wedge Antilles    170   77.0         brown                fair
18:      Jek Tono Porkins    180  110.0         brown                fair
19:                  Yoda     66   17.0         white               green
20:             Palpatine    170   75.0          grey                pale
21:             Boba Fett    183   78.2         black                fair
22:                 IG-88    200  140.0          none               metal
23:                 Bossk    190  113.0          none               green
24:      Lando Calrissian    177   79.0         black                dark
25:                 Lobot    175   79.0          none               light
26:                Ackbar    180   83.0          none        brown mottle
27:            Mon Mothma    150     NA        auburn                fair
28:          Arvel Crynyd     NA     NA         brown                fair
29: Wicket Systri Warrick     88   20.0         brown               brown
30:             Nien Nunb    160   68.0          none                grey
31:          Qui-Gon Jinn    193   89.0         brown                fair
32:           Nute Gunray    191   90.0          none       mottled green
33:         Finis Valorum    170     NA         blond                fair
34:         Padmé Amidala    185   45.0         brown               light
35:         Jar Jar Binks    196   66.0          none              orange
36:          Roos Tarpals    224   82.0          none                grey
37:            Rugor Nass    206     NA          none               green
38:              Ric Olié    183     NA         brown                fair
39:                 Watto    137     NA         black          blue, grey
40:               Sebulba    112   40.0          none           grey, red
41:         Quarsh Panaka    183     NA         black                dark
42:        Shmi Skywalker    163     NA         black                fair
43:            Darth Maul    175   80.0          none                 red
44:           Bib Fortuna    180     NA          none                pale
45:           Ayla Secura    178   55.0          none                blue
46:          Ratts Tyerel     79   15.0          none          grey, blue
47:              Dud Bolt     94   45.0          none          blue, grey
48:               Gasgano    122     NA          none         white, blue
49:        Ben Quadinaros    163   65.0          none grey, green, yellow
50:            Mace Windu    188   84.0          none                dark
51:          Ki-Adi-Mundi    198   82.0         white                pale
52:             Kit Fisto    196   87.0          none               green
53:             Eeth Koth    171     NA         black               brown
54:            Adi Gallia    184   50.0          none                dark
55:           Saesee Tiin    188     NA          none                pale
56:           Yarael Poof    264     NA          none               white
57:              Plo Koon    188   80.0          none              orange
58:            Mas Amedda    196     NA          none                blue
59:          Gregar Typho    185   85.0         black                dark
60:                 Cordé    157     NA         brown               light
61:           Cliegg Lars    183     NA         brown                fair
62:     Poggle the Lesser    183   80.0          none               green
63:       Luminara Unduli    170   56.2         black              yellow
64:         Barriss Offee    166   50.0         black              yellow
65:                 Dormé    165     NA         brown               light
66:                 Dooku    193   80.0         white                fair
67:   Bail Prestor Organa    191     NA         black                 tan
68:            Jango Fett    183   79.0         black                 tan
69:            Zam Wesell    168   55.0        blonde fair, green, yellow
70:       Dexter Jettster    198  102.0          none               brown
71:               Lama Su    229   88.0          none                grey
72:               Taun We    213     NA          none                grey
73:            Jocasta Nu    167     NA         white                fair
74:                R4-P17     96     NA          none         silver, red
75:            Wat Tambor    193   48.0          none         green, grey
76:              San Hill    191     NA          none                grey
77:              Shaak Ti    178   57.0          none    red, blue, white
78:              Grievous    216  159.0          none        brown, white
79:               Tarfful    234  136.0         brown               brown
80:       Raymus Antilles    188   79.0         brown               light
81:             Sly Moore    178   48.0          none                pale
82:            Tion Medon    206   80.0          none                grey
83:                  Finn     NA     NA         black                dark
84:                   Rey     NA     NA         brown               light
85:           Poe Dameron     NA     NA         brown               light
86:                   BB8     NA     NA          none                none
87:        Captain Phasma     NA     NA          none                none
                     name height   mass    hair_color          skin_color
        eye_color birth_year            sex    gender      homeworld
 1:          blue       19.0           male masculine       Tatooine
 2:        yellow      112.0           none masculine       Tatooine
 3:           red       33.0           none masculine          Naboo
 4:        yellow       41.9           male masculine       Tatooine
 5:         brown       19.0         female  feminine       Alderaan
 6:          blue       52.0           male masculine       Tatooine
 7:          blue       47.0         female  feminine       Tatooine
 8:           red         NA           none masculine       Tatooine
 9:         brown       24.0           male masculine       Tatooine
10:     blue-gray       57.0           male masculine        Stewjon
11:          blue       41.9           male masculine       Tatooine
12:          blue       64.0           male masculine         Eriadu
13:          blue      200.0           male masculine       Kashyyyk
14:         brown       29.0           male masculine       Corellia
15:         black       44.0           male masculine          Rodia
16:        orange      600.0 hermaphroditic masculine      Nal Hutta
17:         hazel       21.0           male masculine       Corellia
18:          blue         NA           &lt;NA&gt;      &lt;NA&gt;     Bestine IV
19:         brown      896.0           male masculine           &lt;NA&gt;
20:        yellow       82.0           male masculine          Naboo
21:         brown       31.5           male masculine         Kamino
22:           red       15.0           none masculine           &lt;NA&gt;
23:           red       53.0           male masculine      Trandosha
24:         brown       31.0           male masculine        Socorro
25:          blue       37.0           male masculine         Bespin
26:        orange       41.0           male masculine       Mon Cala
27:          blue       48.0         female  feminine      Chandrila
28:         brown         NA           male masculine           &lt;NA&gt;
29:         brown        8.0           male masculine          Endor
30:         black         NA           male masculine        Sullust
31:          blue       92.0           male masculine           &lt;NA&gt;
32:           red         NA           male masculine Cato Neimoidia
33:          blue       91.0           male masculine      Coruscant
34:         brown       46.0         female  feminine          Naboo
35:        orange       52.0           male masculine          Naboo
36:        orange         NA           male masculine          Naboo
37:        orange         NA           male masculine          Naboo
38:          blue         NA           male masculine          Naboo
39:        yellow         NA           male masculine       Toydaria
40:        orange         NA           male masculine      Malastare
41:         brown       62.0           male masculine          Naboo
42:         brown       72.0         female  feminine       Tatooine
43:        yellow       54.0           male masculine       Dathomir
44:          pink         NA           male masculine         Ryloth
45:         hazel       48.0         female  feminine         Ryloth
46:       unknown         NA           male masculine    Aleen Minor
47:        yellow         NA           male masculine        Vulpter
48:         black         NA           male masculine        Troiken
49:        orange         NA           male masculine           Tund
50:         brown       72.0           male masculine     Haruun Kal
51:        yellow       92.0           male masculine          Cerea
52:         black         NA           male masculine    Glee Anselm
53:         brown         NA           male masculine       Iridonia
54:          blue         NA         female  feminine      Coruscant
55:        orange         NA           male masculine        Iktotch
56:        yellow         NA           male masculine        Quermia
57:         black       22.0           male masculine          Dorin
58:          blue         NA           male masculine       Champala
59:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
60:         brown         NA           &lt;NA&gt;      &lt;NA&gt;          Naboo
61:          blue       82.0           male masculine       Tatooine
62:        yellow         NA           male masculine       Geonosis
63:          blue       58.0         female  feminine         Mirial
64:          blue       40.0         female  feminine         Mirial
65:         brown         NA         female  feminine          Naboo
66:         brown      102.0           male masculine        Serenno
67:         brown       67.0           male masculine       Alderaan
68:         brown       66.0           male masculine   Concord Dawn
69:        yellow         NA         female  feminine          Zolan
70:        yellow         NA           male masculine           Ojom
71:         black         NA           male masculine         Kamino
72:         black         NA         female  feminine         Kamino
73:          blue         NA         female  feminine      Coruscant
74:     red, blue         NA           none  feminine           &lt;NA&gt;
75:       unknown         NA           male masculine          Skako
76:          gold         NA           male masculine     Muunilinst
77:         black         NA         female  feminine          Shili
78: green, yellow         NA           male masculine          Kalee
79:          blue         NA           male masculine       Kashyyyk
80:         brown         NA           male masculine       Alderaan
81:         white         NA           &lt;NA&gt;      &lt;NA&gt;         Umbara
82:         black         NA           male masculine         Utapau
83:          dark         NA           male masculine           &lt;NA&gt;
84:         hazel         NA         female  feminine           &lt;NA&gt;
85:         brown         NA           male masculine           &lt;NA&gt;
86:         black         NA           none masculine           &lt;NA&gt;
87:       unknown         NA         female  feminine           &lt;NA&gt;
        eye_color birth_year            sex    gender      homeworld
           species
 1:          Human
 2:          Droid
 3:          Droid
 4:          Human
 5:          Human
 6:          Human
 7:          Human
 8:          Droid
 9:          Human
10:          Human
11:          Human
12:          Human
13:        Wookiee
14:          Human
15:         Rodian
16:           Hutt
17:          Human
18:           &lt;NA&gt;
19: Yoda's species
20:          Human
21:          Human
22:          Droid
23:     Trandoshan
24:          Human
25:          Human
26:   Mon Calamari
27:          Human
28:          Human
29:           Ewok
30:      Sullustan
31:          Human
32:      Neimodian
33:          Human
34:          Human
35:         Gungan
36:         Gungan
37:         Gungan
38:          Human
39:      Toydarian
40:            Dug
41:          Human
42:          Human
43:         Zabrak
44:        Twi'lek
45:        Twi'lek
46:         Aleena
47:     Vulptereen
48:          Xexto
49:          Toong
50:          Human
51:         Cerean
52:       Nautolan
53:         Zabrak
54:     Tholothian
55:       Iktotchi
56:       Quermian
57:        Kel Dor
58:       Chagrian
59:           &lt;NA&gt;
60:           &lt;NA&gt;
61:          Human
62:      Geonosian
63:       Mirialan
64:       Mirialan
65:          Human
66:          Human
67:          Human
68:          Human
69:       Clawdite
70:       Besalisk
71:       Kaminoan
72:       Kaminoan
73:          Human
74:          Droid
75:        Skakoan
76:           Muun
77:        Togruta
78:        Kaleesh
79:        Wookiee
80:          Human
81:           &lt;NA&gt;
82:         Pau'an
83:          Human
84:          Human
85:          Human
86:          Droid
87:          Human
           species
                                                                                                                    films
 1:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 2:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
 3: A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith,...
 4:                                             A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith
 5:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
 6:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 7:                                                                   A New Hope,Attack of the Clones,Revenge of the Sith
 8:                                                                                                            A New Hope
 9:                                                                                                            A New Hope
10:     A New Hope,The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
11:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
12:                                                                                        A New Hope,Revenge of the Sith
13:                           A New Hope,The Empire Strikes Back,Return of the Jedi,Revenge of the Sith,The Force Awakens
14:                                               A New Hope,The Empire Strikes Back,Return of the Jedi,The Force Awakens
15:                                                                                                            A New Hope
16:                                                                      A New Hope,Return of the Jedi,The Phantom Menace
17:                                                                 A New Hope,The Empire Strikes Back,Return of the Jedi
18:                                                                                                            A New Hope
19:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
20:                The Empire Strikes Back,Return of the Jedi,The Phantom Menace,Attack of the Clones,Revenge of the Sith
21:                                                       The Empire Strikes Back,Return of the Jedi,Attack of the Clones
22:                                                                                               The Empire Strikes Back
23:                                                                                               The Empire Strikes Back
24:                                                                            The Empire Strikes Back,Return of the Jedi
25:                                                                                               The Empire Strikes Back
26:                                                                                  Return of the Jedi,The Force Awakens
27:                                                                                                    Return of the Jedi
28:                                                                                                    Return of the Jedi
29:                                                                                                    Return of the Jedi
30:                                                                                                    Return of the Jedi
31:                                                                                                    The Phantom Menace
32:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
33:                                                                                                    The Phantom Menace
34:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
35:                                                                               The Phantom Menace,Attack of the Clones
36:                                                                                                    The Phantom Menace
37:                                                                                                    The Phantom Menace
38:                                                                                                    The Phantom Menace
39:                                                                               The Phantom Menace,Attack of the Clones
40:                                                                                                    The Phantom Menace
41:                                                                                                    The Phantom Menace
42:                                                                               The Phantom Menace,Attack of the Clones
43:                                                                                                    The Phantom Menace
44:                                                                                                    Return of the Jedi
45:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
46:                                                                                                    The Phantom Menace
47:                                                                                                    The Phantom Menace
48:                                                                                                    The Phantom Menace
49:                                                                                                    The Phantom Menace
50:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
51:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
52:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
53:                                                                                The Phantom Menace,Revenge of the Sith
54:                                                                                The Phantom Menace,Revenge of the Sith
55:                                                                                The Phantom Menace,Revenge of the Sith
56:                                                                                                    The Phantom Menace
57:                                                           The Phantom Menace,Attack of the Clones,Revenge of the Sith
58:                                                                               The Phantom Menace,Attack of the Clones
59:                                                                                                  Attack of the Clones
60:                                                                                                  Attack of the Clones
61:                                                                                                  Attack of the Clones
62:                                                                              Attack of the Clones,Revenge of the Sith
63:                                                                              Attack of the Clones,Revenge of the Sith
64:                                                                                                  Attack of the Clones
65:                                                                                                  Attack of the Clones
66:                                                                              Attack of the Clones,Revenge of the Sith
67:                                                                              Attack of the Clones,Revenge of the Sith
68:                                                                                                  Attack of the Clones
69:                                                                                                  Attack of the Clones
70:                                                                                                  Attack of the Clones
71:                                                                                                  Attack of the Clones
72:                                                                                                  Attack of the Clones
73:                                                                                                  Attack of the Clones
74:                                                                              Attack of the Clones,Revenge of the Sith
75:                                                                                                  Attack of the Clones
76:                                                                                                  Attack of the Clones
77:                                                                              Attack of the Clones,Revenge of the Sith
78:                                                                                                   Revenge of the Sith
79:                                                                                                   Revenge of the Sith
80:                                                                                        A New Hope,Revenge of the Sith
81:                                                                              Attack of the Clones,Revenge of the Sith
82:                                                                                                   Revenge of the Sith
83:                                                                                                     The Force Awakens
84:                                                                                                     The Force Awakens
85:                                                                                                     The Force Awakens
86:                                                                                                     The Force Awakens
87:                                                                                                     The Force Awakens
                                                                                                                    films
                               vehicles
 1:   Snowspeeder,Imperial Speeder Bike
 2:                                    
 3:                                    
 4:                                    
 5:               Imperial Speeder Bike
 6:                                    
 7:                                    
 8:                                    
 9:                                    
10:                     Tribubble bongo
11: Zephyr-G swoop bike,XJ-6 airspeeder
12:                                    
13:                               AT-ST
14:                                    
15:                                    
16:                                    
17:                         Snowspeeder
18:                                    
19:                                    
20:                                    
21:                                    
22:                                    
23:                                    
24:                                    
25:                                    
26:                                    
27:                                    
28:                                    
29:                                    
30:                                    
31:                     Tribubble bongo
32:                                    
33:                                    
34:                                    
35:                                    
36:                                    
37:                                    
38:                                    
39:                                    
40:                                    
41:                                    
42:                                    
43:                        Sith speeder
44:                                    
45:                                    
46:                                    
47:                                    
48:                                    
49:                                    
50:                                    
51:                                    
52:                                    
53:                                    
54:                                    
55:                                    
56:                                    
57:                                    
58:                                    
59:                                    
60:                                    
61:                                    
62:                                    
63:                                    
64:                                    
65:                                    
66:                    Flitknot speeder
67:                                    
68:                                    
69:          Koro-2 Exodrive airspeeder
70:                                    
71:                                    
72:                                    
73:                                    
74:                                    
75:                                    
76:                                    
77:                                    
78:         Tsmeu-6 personal wheel bike
79:                                    
80:                                    
81:                                    
82:                                    
83:                                    
84:                                    
85:                                    
86:                                    
87:                                    
                               vehicles
                                                                                               starships
 1:                                                                              X-wing,Imperial shuttle
 2:                                                                                                     
 3:                                                                                                     
 4:                                                                                      TIE Advanced x1
 5:                                                                                                     
 6:                                                                                                     
 7:                                                                                                     
 8:                                                                                                     
 9:                                                                                               X-wing
10: Jedi starfighter,Trade Federation cruiser,Naboo star skiff,Jedi Interceptor,Belbullab-22 starfighter
11:                                              Naboo fighter,Trade Federation cruiser,Jedi Interceptor
12:                                                                                                     
13:                                                                   Millennium Falcon,Imperial shuttle
14:                                                                   Millennium Falcon,Imperial shuttle
15:                                                                                                     
16:                                                                                                     
17:                                                                                               X-wing
18:                                                                                               X-wing
19:                                                                                                     
20:                                                                                                     
21:                                                                                              Slave 1
22:                                                                                                     
23:                                                                                                     
24:                                                                                    Millennium Falcon
25:                                                                                                     
26:                                                                                                     
27:                                                                                                     
28:                                                                                               A-wing
29:                                                                                                     
30:                                                                                    Millennium Falcon
31:                                                                                                     
32:                                                                                                     
33:                                                                                                     
34:                                                   Naboo fighter,H-type Nubian yacht,Naboo star skiff
35:                                                                                                     
36:                                                                                                     
37:                                                                                                     
38:                                                                                 Naboo Royal Starship
39:                                                                                                     
40:                                                                                                     
41:                                                                                                     
42:                                                                                                     
43:                                                                                             Scimitar
44:                                                                                                     
45:                                                                                                     
46:                                                                                                     
47:                                                                                                     
48:                                                                                                     
49:                                                                                                     
50:                                                                                                     
51:                                                                                                     
52:                                                                                                     
53:                                                                                                     
54:                                                                                                     
55:                                                                                                     
56:                                                                                                     
57:                                                                                     Jedi starfighter
58:                                                                                                     
59:                                                                                        Naboo fighter
60:                                                                                                     
61:                                                                                                     
62:                                                                                                     
63:                                                                                                     
64:                                                                                                     
65:                                                                                                     
66:                                                                                                     
67:                                                                                                     
68:                                                                                                     
69:                                                                                                     
70:                                                                                                     
71:                                                                                                     
72:                                                                                                     
73:                                                                                                     
74:                                                                                                     
75:                                                                                                     
76:                                                                                                     
77:                                                                                                     
78:                                                                             Belbullab-22 starfighter
79:                                                                                                     
80:                                                                                                     
81:                                                                                                     
82:                                                                                                     
83:                                                                                                     
84:                                                                                                     
85:                                                                                               X-wing
86:                                                                                                     
87:                                                                                                     
                                                                                               starships
         H_W   fakeVar
 1: 2.233766  8.774964
 2: 2.226667  8.660254
 3: 3.000000  5.656854
 4: 1.485294 11.661904
 5: 3.061224  7.000000
 6: 1.483333 10.954451
 7: 2.200000  8.660254
 8: 3.031250  5.656854
 9: 2.178571  9.165151
10: 2.363636  8.774964
11: 2.238095  9.165151
12:       NA        NA
13: 2.035714 10.583005
14: 2.250000  8.944272
15: 2.337838  8.602325
16: 0.128866 36.851052
17: 2.207792  8.774964
18: 1.636364 10.488088
19: 3.882353  4.123106
20: 2.266667  8.660254
21: 2.340153  8.843076
22: 1.428571 11.832160
23: 1.681416 10.630146
24: 2.240506  8.888194
25: 2.215190  8.888194
26: 2.168675  9.110434
27:       NA        NA
28:       NA        NA
29: 4.400000  4.472136
30: 2.352941  8.246211
31: 2.168539  9.433981
32: 2.122222  9.486833
33:       NA        NA
34: 4.111111  6.708204
35: 2.969697  8.124038
36: 2.731707  9.055385
37:       NA        NA
38:       NA        NA
39:       NA        NA
40: 2.800000  6.324555
41:       NA        NA
42:       NA        NA
43: 2.187500  8.944272
44:       NA        NA
45: 3.236364  7.416198
46: 5.266667  3.872983
47: 2.088889  6.708204
48:       NA        NA
49: 2.507692  8.062258
50: 2.238095  9.165151
51: 2.414634  9.055385
52: 2.252874  9.327379
53:       NA        NA
54: 3.680000  7.071068
55:       NA        NA
56:       NA        NA
57: 2.350000  8.944272
58:       NA        NA
59: 2.176471  9.219544
60:       NA        NA
61:       NA        NA
62: 2.287500  8.944272
63: 3.024911  7.496666
64: 3.320000  7.071068
65:       NA        NA
66: 2.412500  8.944272
67:       NA        NA
68: 2.316456  8.888194
69: 3.054545  7.416198
70: 1.941176 10.099505
71: 2.602273  9.380832
72:       NA        NA
73:       NA        NA
74:       NA        NA
75: 4.020833  6.928203
76:       NA        NA
77: 3.122807  7.549834
78: 1.358491 12.609520
79: 1.720588 11.661904
80: 2.379747  8.888194
81: 3.708333  6.928203
82: 2.575000  8.944272
83:       NA        NA
84:       NA        NA
85:       NA        NA
86:       NA        NA
87:       NA        NA
         H_W   fakeVar</code></pre>
</div>
</div>
<p>Y para realizar operaciones de agrupación en data table</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a>starwars_dt[, .(<span class="at">altura_media =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)), by <span class="ot">=</span> gender]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      gender altura_media
1: masculine     176.5323
2:  feminine     166.5333
3:      &lt;NA&gt;     175.0000</code></pre>
</div>
</div>
</section>
</section>
<section id="introduction-to-data-visualization-in-r-with-ggplot2" class="level1">
<h1>Introduction to Data Visualization in R with <code>ggplot2</code></h1>
<p>Data visualization stands as a cornerstone in the data analysis cycle, permeating its beginning, middle, and end stages.</p>
<p>In this module, emphasis lies on practical, hands-on code sessions over theoretical discussions, fostering an interactive learning experience.</p>
<p>We will delve into the visualization capabilities of the ggplot2 library within the tidyverse ecosystem, a versatile tool favored by renowned entities such as the <a href="https://bbc.github.io/rcookbook/">BBC</a> and the <a href="https://blog.revolutionanalytics.com/2018/06/ft-bbc-uses-r.html">Financial Times</a>.</p>
<div id="fig-ggplot" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/logo5.png" class="img-fluid figure-img" width="200"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Hex sticker de ggplot2</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Bibliographical References</strong></p>
<p>For those eager to delve deeper into data visualization with ggplot2, I recommend the following resources:</p>
<ul>
<li><p>Foundational</p>
<ul>
<li><p><a href="https://r-graphics.org/">R Graphics Cookbook</a>, 2nd edition by Winston Chang: This cookbook-style reference is invaluable for resolving both basic and advanced visualization queries.</p></li>
<li><p><a href="https://socviz.co/">Data Visualization A practical introduction</a> by Kieran Healy: Offering a comprehensive exploration beyond mere tool proficiency, this work delves into the principles of effective visualization.</p></li>
</ul></li>
<li><p>Supplementary</p>
<ul>
<li><p><a href="https://ggplot2-book.org/">ggplot2: Elegant Graphics for Data Analysis (3e)</a> by Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen: An essential read for understanding the philosophy underpinning ggplot2, known as the Grammar of Graphics.</p></li>
<li><p><a href="https://link.springer.com/book/10.1007/0-387-28695-0?source=post_page-----1f92b4ed4149--------------------------------">The Grammar of Graphics</a> by Leland Wilkinson: A foundational text on the principles of <em>The Grammar of Graphics</em>, highly recommended for enthusiasts of visualization.</p></li>
</ul></li>
</ul>
</div>
</div>
<p>Let’s proceed by installing and loading the ggplot2 library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(ggplot2)</span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re going to use datasets provided by the ggplot2 library as examples. Let’s start with <code>mpg</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a>mpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 x 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 audi         a4           1.8  1999     4 auto~ f        18    29 p     comp~
 2 audi         a4           1.8  1999     4 manu~ f        21    29 p     comp~
 3 audi         a4           2    2008     4 manu~ f        20    31 p     comp~
 4 audi         a4           2    2008     4 auto~ f        21    30 p     comp~
 5 audi         a4           2.8  1999     6 auto~ f        16    26 p     comp~
 6 audi         a4           2.8  1999     6 manu~ f        18    26 p     comp~
 7 audi         a4           3.1  2008     6 auto~ f        18    27 p     comp~
 8 audi         a4 quattro   1.8  1999     4 manu~ 4        18    26 p     comp~
 9 audi         a4 quattro   1.8  1999     4 auto~ 4        16    25 p     comp~
10 audi         a4 quattro   2    2008     4 manu~ 4        20    28 p     comp~
# i 224 more rows</code></pre>
</div>
</div>
<p>Similar to how language grammar organizes language using a set of rules, the grammar of graphics delineates a set of rules for structuring graphs.</p>
<p>At its core, the <strong>grammar of graphics</strong> revolves around the concept of layers. A coherent combination of layers culminates in the formation of a graph</p>
<section id="layers" class="level2">
<h2 class="anchored" data-anchor-id="layers">Layers</h2>
<ul>
<li><em>Data</em>: source dataset being visualized</li>
<li><em>Aesthetics</em>: links variables in the dataset to visual properties like color, size, and shape</li>
<li><em>Geometries</em>: visual representation used for the data (line, points, bars)</li>
<li><em>Facets</em>: divides the data into subsets based on one or more categorical variables (country, gender, age)</li>
<li><em>Statistics</em>: computed geometries based on statistical measures</li>
<li><em>Coordinates</em>: specifies the type of coordinate system, such as cartesian, polar, etc.</li>
<li><em>Themes</em>: appearance of plot decorations (axis, grid lines, background)</li>
</ul>
<div id="fig-layers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/gglayers.png" class="img-fluid figure-img" width="400"></p>
<figcaption class="figure-caption">Figure&nbsp;11: Image adapted from The Grammar of Graphics. <a href="https://r.qcbs.ca/workshop03/book-en/grammar-of-graphics-gg-basics.html">Source</a>.</figcaption>
</figure>
</div>
<p>Fundamentally, every plot necessitates a dataset, a geometric representation, and aesthetic specifications.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAP<span class="sc">&gt;</span>)) <span class="sc">+</span> <span class="er">&lt;</span>GEOMETRY<span class="sc">&gt;</span>(OPTIONS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The Geometry refers to the type of plot (scatter, line, bar, etc.), and aesthetics describe how we map data onto the axes, essentially what we place on the axes.</p>
<p>The function for creating a plot is <code>ggplot()</code>.</p>
<p>Let’s construct a plot that relates the variables <code>displ</code> and <code>hwy</code>. The first step is to call the data and specify the variables we want to represent; this latter aspect is what ggplot refers to as <em>aesthetics</em></p>
</section>
<section id="data-and-aesthetics" class="level2">
<h2 class="anchored" data-anchor-id="data-and-aesthetics">Data and aesthetics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) </span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot035-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="geometries" class="level2">
<h2 class="anchored" data-anchor-id="geometries">Geometries</h2>
<p>We see that it represents a sort of canvas where the variables to be represented are displayed. We need a geometry <em>layer</em>. Yo can see a list of ggplot2 geometries <a href="https://ggplot2.tidyverse.org/reference/#geoms">here</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb423"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb423-3"><a href="#cb423-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb423-4"><a href="#cb423-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot04-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Within aesthetics, we can incorporate additional options:</p>
<ul>
<li><p><code>color</code>: Specifies the color of the geometry and can vary depending on a third variable if such a dependency exists</p></li>
<li><p><code>fill</code> Specifies the fill color of the geometry if it’s a shape that can be filled (such as bars, points, polygons, etc.).</p></li>
<li><p><code>shape</code> Indicates the shape of the points (ordered pairs or n-tuples of the represented variables) or the lines connecting them.</p></li>
<li><p><code>size</code> Defines the size of the geometry.</p></li>
<li><p><code>alpha</code> Controls the transparency of the geometry.</p></li>
</ul>
<p>We add a color to the geometry that depends on the discrete variable <code>class</code> from the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class)) <span class="sc">+</span></span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb424-3"><a href="#cb424-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-4"><a href="#cb424-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot05-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is what we called a a <em>non fixed</em> aesthetic, in this case it should appear as a argument if the <code>aes()</code> function.</p>
<p>Look at what happens if we include the color argument in <code>geom_point()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> class)</span>
<span id="cb425-3"><a href="#cb425-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-4"><a href="#cb425-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We obtain a error, let us substitute the <code>class</code> variable by a color name</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>)</span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot056-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This is what we call a <em>fixed aesthetic</em>, the color is the same for all the points.</p>
<p>Likewise, we can include a shape for each ordered pair that depends on another variable, in this case <code>cyl</code>. Before adding it, we convert it into a factor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb427"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ,</span>
<span id="cb427-2"><a href="#cb427-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">y =</span> hwy,</span>
<span id="cb427-3"><a href="#cb427-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">color =</span> class,</span>
<span id="cb427-4"><a href="#cb427-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">shape =</span> <span class="fu">factor</span>(cyl))</span>
<span id="cb427-5"><a href="#cb427-5" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">+</span></span>
<span id="cb427-6"><a href="#cb427-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb427-7"><a href="#cb427-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb427-8"><a href="#cb427-8" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot06-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can modify the size of the aesthetics</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class, <span class="at">shape =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot065-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Honestly, this chart introduces more confusion than it resolves. Let’s simplify our approach by returning to the basic version, and we will select the shape of the aesthetic elements using the <code>shape</code> attribute. Each shape option is assigned a specific number, which you can reference <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#point">here</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb429-2"><a href="#cb429-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="dv">23</span>)</span>
<span id="cb429-3"><a href="#cb429-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-4"><a href="#cb429-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot07-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s stick with slightly larger circles</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb430-2"><a href="#cb430-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>)</span>
<span id="cb430-3"><a href="#cb430-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-4"><a href="#cb430-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot08-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We are going to exclude cars with 5 cylinders (as there are very few), and this way we see how we can manipulate the dataset within the plot instructions.</p>
<div class="cell" data-source-line-numbers="1">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode numberSource r numberLines code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb431-2"><a href="#cb431-2"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb431-3"><a href="#cb431-3"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>)</span>
<span id="cb431-4"><a href="#cb431-4"></a></span>
<span id="cb431-5"><a href="#cb431-5"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot09-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Changing the geom, bar graph</p>
<div class="cell" data-source-line-numbers="1">
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode numberSource r numberLines code-with-copy"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">fill =</span> <span class="fu">factor</span>(class))) <span class="sc">+</span></span>
<span id="cb432-2"><a href="#cb432-2"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb432-3"><a href="#cb432-3"></a></span>
<span id="cb432-4"><a href="#cb432-4"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot092-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We will explore a different dataset that is well-suited for creating line graphs, the <code>economics</code> dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a>economics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 574 x 6
   date         pce    pop psavert uempmed unemploy
   &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
 1 1967-07-01  507. 198712    12.6     4.5     2944
 2 1967-08-01  510. 198911    12.6     4.7     2945
 3 1967-09-01  516. 199113    11.9     4.6     2958
 4 1967-10-01  512. 199311    12.9     4.9     3143
 5 1967-11-01  517. 199498    12.8     4.7     3066
 6 1967-12-01  525. 199657    11.8     4.8     3018
 7 1968-01-01  531. 199808    11.7     5.1     2878
 8 1968-02-01  534. 199920    12.3     4.5     3001
 9 1968-03-01  544. 200056    11.7     4.1     2877
10 1968-04-01  544  200208    12.3     4.6     2709
# i 564 more rows</code></pre>
</div>
</div>
<p>Line graph</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(economics, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)) <span class="sc">+</span></span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb435-3"><a href="#cb435-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-4"><a href="#cb435-4" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot082-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(economics, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)) <span class="sc">+</span></span>
<span id="cb436-2"><a href="#cb436-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">1.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
i Please use `linewidth` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot083-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Histograms</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a>graph_h <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span></span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true" tabindex="-1"></a>graph_h</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Not that nice, let us change the default parameters, the bindwith</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb440"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a>graph_h <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span></span>
<span id="cb440-2"><a href="#cb440-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">3</span>)</span>
<span id="cb440-3"><a href="#cb440-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-4"><a href="#cb440-4" aria-hidden="true" tabindex="-1"></a>graph_h</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or the number of bins</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true" tabindex="-1"></a>graph_h <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span></span>
<span id="cb441-2"><a href="#cb441-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">8</span>)</span>
<span id="cb441-3"><a href="#cb441-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-4"><a href="#cb441-4" aria-hidden="true" tabindex="-1"></a>graph_h</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot152-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or use some colors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb442"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a>graph_h <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span></span>
<span id="cb442-2"><a href="#cb442-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">3</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb442-3"><a href="#cb442-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-4"><a href="#cb442-4" aria-hidden="true" tabindex="-1"></a>graph_h</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A boxplot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a>graph_b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span><span class="fu">factor</span>(class), <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb443-3"><a href="#cb443-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-4"><a href="#cb443-4" aria-hidden="true" tabindex="-1"></a>graph_b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Change the color</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb444"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true" tabindex="-1"></a>graph_b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span><span class="fu">factor</span>(class), <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb444-2"><a href="#cb444-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">color=</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"cornsilk"</span>)</span>
<span id="cb444-3"><a href="#cb444-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-4"><a href="#cb444-4" aria-hidden="true" tabindex="-1"></a>graph_b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot172-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a>graph_b <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span><span class="fu">factor</span>(class), <span class="at">y =</span> hwy, <span class="at">fill =</span> <span class="fu">factor</span>(class) )) <span class="sc">+</span></span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb445-3"><a href="#cb445-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-4"><a href="#cb445-4" aria-hidden="true" tabindex="-1"></a>graph_b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot173-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="facets" class="level2">
<h2 class="anchored" data-anchor-id="facets">Facets</h2>
<p>It may not be easy to view everything on a single graph, in this case we can create a sub plot for each categorical variable. In such cases, we can define facets with <code>facet_wrap()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb446"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb446-2"><a href="#cb446-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb446-3"><a href="#cb446-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb446-4"><a href="#cb446-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> cyl)</span>
<span id="cb446-5"><a href="#cb446-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-6"><a href="#cb446-6" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You can also facet by two categorical variables using <code>facet_grid()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(manufacturer))) <span class="sc">+</span></span>
<span id="cb447-3"><a href="#cb447-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb447-4"><a href="#cb447-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(class <span class="sc">~</span> cyl)</span>
<span id="cb447-5"><a href="#cb447-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb447-6"><a href="#cb447-6" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="statistics" class="level2">
<h2 class="anchored" data-anchor-id="statistics">Statistics</h2>
<p>Now, let’s estimate a linear relationship between the variables <code>hwy</code> and <code>disp</code> by cylinders.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb448-3"><a href="#cb448-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb448-4"><a href="#cb448-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span>
<span id="cb448-5"><a href="#cb448-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-6"><a href="#cb448-6" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We have the ability to adjust the appearance of the smoothing functions. For instance, we can remove the confidence interval and change the line thickness.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb449"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb449-2"><a href="#cb449-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb449-3"><a href="#cb449-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb449-4"><a href="#cb449-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb449-5"><a href="#cb449-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb449-6"><a href="#cb449-6" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot105-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And if we want the relationship to be nonlinear, we do not specify the method (nonlinear is the default)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb450"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span>
<span id="cb450-5"><a href="#cb450-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-6"><a href="#cb450-6" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="themes" class="level2">
<h2 class="anchored" data-anchor-id="themes">Themes</h2>
<p>Vamos con más gráfico de estadística descriptiva propia de un EDA.</p>
<p>Un histograma</p>
<p>Finalmente, como ponemos títulos y etiquetas a nuestros gráficos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a>graph <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(cyl <span class="sc">!=</span> <span class="dv">5</span>),</span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb451-3"><a href="#cb451-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb451-4"><a href="#cb451-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mi Primer Gráfico"</span>,</span>
<span id="cb451-5"><a href="#cb451-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Con ggplot"</span>,</span>
<span id="cb451-6"><a href="#cb451-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Fuente: Yo mismo"</span>) <span class="sc">+</span></span>
<span id="cb451-7"><a href="#cb451-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Cilindrada"</span>) <span class="sc">+</span></span>
<span id="cb451-8"><a href="#cb451-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Millas por galón"</span>)</span>
<span id="cb451-9"><a href="#cb451-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-10"><a href="#cb451-10" aria-hidden="true" tabindex="-1"></a>graph</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="IntroR_files/figure-html/ggplot18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="una-extremadamente-breve-introducción-a-la-modelización-en-r" class="level1">
<h1>Una (extremadamente) breve introducción a la modelización en R</h1>
<section id="modelos-lineales-regresión-lineal" class="level2">
<h2 class="anchored" data-anchor-id="modelos-lineales-regresión-lineal">Modelos lineales (regresión lineal)</h2>
<p>La estimación lineal en R base se realiza con la función <code>lm()</code></p>
<p>Los argumentos básicos de esta función son un conjunto de datos y una <em>formula</em> que indique a la función que variables deseamos relacionar</p>
<p>Vamos a usar como ejemplo, el mismo conjunto de datos usado en la sección de matrices</p>
<p>Cargamos e inspeccionamos los datos de la librería <code>Wooldridge</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb452"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"wage1"</span>)</span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wage1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  wage educ exper tenure nonwhite female married numdep smsa northcen south
1 3.10   11     2      0        0      1       0      2    1        0     0
2 3.24   12    22      2        0      1       1      3    1        0     0
3 3.00   11     2      0        0      0       0      2    0        0     0
4 6.00    8    44     28        0      0       1      0    1        0     0
5 5.30   12     7      2        0      0       1      1    0        0     0
6 8.75   16     9      8        0      0       1      0    1        0     0
  west construc ndurman trcommpu trade services profserv profocc clerocc
1    1        0       0        0     0        0        0       0       0
2    1        0       0        0     0        1        0       0       0
3    1        0       0        0     1        0        0       0       0
4    1        0       0        0     0        0        0       0       1
5    1        0       0        0     0        0        0       0       0
6    1        0       0        0     0        0        1       1       0
  servocc    lwage expersq tenursq
1       0 1.131402       4       0
2       1 1.175573     484       4
3       0 1.098612       4       0
4       0 1.791759    1936     784
5       0 1.667707      49       4
6       0 2.169054      81      64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wage1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      wage             educ           exper           tenure      
 Min.   : 0.530   Min.   : 0.00   Min.   : 1.00   Min.   : 0.000  
 1st Qu.: 3.330   1st Qu.:12.00   1st Qu.: 5.00   1st Qu.: 0.000  
 Median : 4.650   Median :12.00   Median :13.50   Median : 2.000  
 Mean   : 5.896   Mean   :12.56   Mean   :17.02   Mean   : 5.105  
 3rd Qu.: 6.880   3rd Qu.:14.00   3rd Qu.:26.00   3rd Qu.: 7.000  
 Max.   :24.980   Max.   :18.00   Max.   :51.00   Max.   :44.000  
    nonwhite          female          married           numdep     
 Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.000  
 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.000  
 Median :0.0000   Median :0.0000   Median :1.0000   Median :1.000  
 Mean   :0.1027   Mean   :0.4791   Mean   :0.6084   Mean   :1.044  
 3rd Qu.:0.0000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:2.000  
 Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :6.000  
      smsa           northcen         south             west       
 Min.   :0.0000   Min.   :0.000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.0000   1st Qu.:0.000   1st Qu.:0.0000   1st Qu.:0.0000  
 Median :1.0000   Median :0.000   Median :0.0000   Median :0.0000  
 Mean   :0.7224   Mean   :0.251   Mean   :0.3555   Mean   :0.1692  
 3rd Qu.:1.0000   3rd Qu.:0.750   3rd Qu.:1.0000   3rd Qu.:0.0000  
 Max.   :1.0000   Max.   :1.000   Max.   :1.0000   Max.   :1.0000  
    construc          ndurman          trcommpu           trade       
 Min.   :0.00000   Min.   :0.0000   Min.   :0.00000   Min.   :0.0000  
 1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:0.00000   1st Qu.:0.0000  
 Median :0.00000   Median :0.0000   Median :0.00000   Median :0.0000  
 Mean   :0.04563   Mean   :0.1141   Mean   :0.04373   Mean   :0.2871  
 3rd Qu.:0.00000   3rd Qu.:0.0000   3rd Qu.:0.00000   3rd Qu.:1.0000  
 Max.   :1.00000   Max.   :1.0000   Max.   :1.00000   Max.   :1.0000  
    services         profserv         profocc          clerocc      
 Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  
 Median :0.0000   Median :0.0000   Median :0.0000   Median :0.0000  
 Mean   :0.1008   Mean   :0.2586   Mean   :0.3669   Mean   :0.1673  
 3rd Qu.:0.0000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:0.0000  
 Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
    servocc           lwage            expersq          tenursq       
 Min.   :0.0000   Min.   :-0.6349   Min.   :   1.0   Min.   :   0.00  
 1st Qu.:0.0000   1st Qu.: 1.2030   1st Qu.:  25.0   1st Qu.:   0.00  
 Median :0.0000   Median : 1.5369   Median : 182.5   Median :   4.00  
 Mean   :0.1407   Mean   : 1.6233   Mean   : 473.4   Mean   :  78.15  
 3rd Qu.:0.0000   3rd Qu.: 1.9286   3rd Qu.: 676.0   3rd Qu.:  49.00  
 Max.   :1.0000   Max.   : 3.2181   Max.   :2601.0   Max.   :1936.00  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wage1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   526 obs. of  24 variables:
 $ wage    : num  3.1 3.24 3 6 5.3 ...
 $ educ    : int  11 12 11 8 12 16 18 12 12 17 ...
 $ exper   : int  2 22 2 44 7 9 15 5 26 22 ...
 $ tenure  : int  0 2 0 28 2 8 7 3 4 21 ...
 $ nonwhite: int  0 0 0 0 0 0 0 0 0 0 ...
 $ female  : int  1 1 0 0 0 0 0 1 1 0 ...
 $ married : int  0 1 0 1 1 1 0 0 0 1 ...
 $ numdep  : int  2 3 2 0 1 0 0 0 2 0 ...
 $ smsa    : int  1 1 0 1 0 1 1 1 1 1 ...
 $ northcen: int  0 0 0 0 0 0 0 0 0 0 ...
 $ south   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ west    : int  1 1 1 1 1 1 1 1 1 1 ...
 $ construc: int  0 0 0 0 0 0 0 0 0 0 ...
 $ ndurman : int  0 0 0 0 0 0 0 0 0 0 ...
 $ trcommpu: int  0 0 0 0 0 0 0 0 0 0 ...
 $ trade   : int  0 0 1 0 0 0 1 0 1 0 ...
 $ services: int  0 1 0 0 0 0 0 0 0 0 ...
 $ profserv: int  0 0 0 0 0 1 0 0 0 0 ...
 $ profocc : int  0 0 0 0 0 1 1 1 1 1 ...
 $ clerocc : int  0 0 0 1 0 0 0 0 0 0 ...
 $ servocc : int  0 1 0 0 0 0 0 0 0 0 ...
 $ lwage   : num  1.13 1.18 1.1 1.79 1.67 ...
 $ expersq : int  4 484 4 1936 49 81 225 25 676 484 ...
 $ tenursq : int  0 4 0 784 4 64 49 9 16 441 ...
 - attr(*, "time.stamp")= chr "25 Jun 2011 23:03"</code></pre>
</div>
</div>
<p>Estimamos un modelo lineal que explique el logaritmo del salario como función de los años de educación, la experiencia y años en la empresa actual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a>modelo_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> wage1, lwage <span class="sc">~</span> educ <span class="sc">+</span> exper <span class="sc">+</span> tenure)</span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modelo_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lwage ~ educ + exper + tenure, data = wage1)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.05802 -0.29645 -0.03265  0.28788  1.42809 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 0.284360   0.104190   2.729  0.00656 ** 
educ        0.092029   0.007330  12.555  &lt; 2e-16 ***
exper       0.004121   0.001723   2.391  0.01714 *  
tenure      0.022067   0.003094   7.133 3.29e-12 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4409 on 522 degrees of freedom
Multiple R-squared:  0.316, Adjusted R-squared:  0.3121 
F-statistic: 80.39 on 3 and 522 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="regresión-logística" class="level2">
<h2 class="anchored" data-anchor-id="regresión-logística">Regresión logística</h2>
<p>La regresión logística se puede interpretar como un modelo de regresión no lineal que puede lidiar con variables dependientes binarias, o como un modelo de clasificación que pretende predecir una respuesta cualitativa.</p>
<p>En R base, usamos la función <code>glm()</code> para estimar modelos lineales generalizados</p>
<p>Presentamos un ejemplo usando una base de datos de aprobación de créditos bancarios. Exploramos los datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"HMDA"</span>)</span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-3"><a href="#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(HMDA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  deny pirat hirat     lvrat chist mhist phist unemp selfemp insurance condomin
1   no 0.221 0.221 0.8000000     5     2    no   3.9      no        no       no
2   no 0.265 0.265 0.9218750     2     2    no   3.2      no        no       no
3   no 0.372 0.248 0.9203980     1     2    no   3.2      no        no       no
4   no 0.320 0.250 0.8604651     1     2    no   4.3      no        no       no
5   no 0.360 0.350 0.6000000     1     1    no   3.2      no        no       no
6   no 0.240 0.170 0.5105263     1     1    no   3.9      no        no       no
  afam single hschool
1   no     no     yes
2   no    yes     yes
3   no     no     yes
4   no     no     yes
5   no     no     yes
6   no     no     yes</code></pre>
</div>
<div class="sourceCode cell-code" id="cb462"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(HMDA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  deny          pirat            hirat            lvrat        chist   
 no :2095   Min.   :0.0000   Min.   :0.0000   Min.   :0.0200   1:1353  
 yes: 285   1st Qu.:0.2800   1st Qu.:0.2140   1st Qu.:0.6527   2: 441  
            Median :0.3300   Median :0.2600   Median :0.7795   3: 126  
            Mean   :0.3308   Mean   :0.2553   Mean   :0.7378   4:  77  
            3rd Qu.:0.3700   3rd Qu.:0.2988   3rd Qu.:0.8685   5: 182  
            Max.   :3.0000   Max.   :3.0000   Max.   :1.9500   6: 201  
 mhist    phist          unemp        selfemp    insurance  condomin  
 1: 747   no :2205   Min.   : 1.800   no :2103   no :2332   no :1694  
 2:1571   yes: 175   1st Qu.: 3.100   yes: 277   yes:  48   yes: 686  
 3:  41              Median : 3.200                                   
 4:  21              Mean   : 3.774                                   
                     3rd Qu.: 3.900                                   
                     Max.   :10.600                                   
  afam      single     hschool   
 no :2041   no :1444   no :  39  
 yes: 339   yes: 936   yes:2341  
                                 
                                 
                                 
                                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb464"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(HMDA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2380 obs. of  14 variables:
 $ deny     : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 2 1 ...
 $ pirat    : num  0.221 0.265 0.372 0.32 0.36 ...
 $ hirat    : num  0.221 0.265 0.248 0.25 0.35 ...
 $ lvrat    : num  0.8 0.922 0.92 0.86 0.6 ...
 $ chist    : Factor w/ 6 levels "1","2","3","4",..: 5 2 1 1 1 1 1 2 2 2 ...
 $ mhist    : Factor w/ 4 levels "1","2","3","4": 2 2 2 2 1 1 2 2 2 1 ...
 $ phist    : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ unemp    : num  3.9 3.2 3.2 4.3 3.2 ...
 $ selfemp  : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ insurance: Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 2 1 ...
 $ condomin : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 2 1 1 1 ...
 $ afam     : Factor w/ 2 levels "no","yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ single   : Factor w/ 2 levels "no","yes": 1 2 1 1 1 1 2 1 1 2 ...
 $ hschool  : Factor w/ 2 levels "no","yes": 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
</div>
</div>
<p>Estimamos un regresión logística que intente explicar los factores que determinan la probabilidad de que un crédito sea rechazado como función del ratio de pagos sobre ingreso y la etnia, en este caso, si se es afroamericano o no.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a>modelo_2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="at">data =</span> HMDA, <span class="at">formula =</span> deny <span class="sc">~</span> pirat <span class="sc">+</span> afam , <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> logit))</span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(modelo_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = deny ~ pirat + afam, family = binomial(link = logit), 
    data = HMDA)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.3709  -0.4732  -0.4219  -0.3556   2.8038  

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept)  -4.1256     0.2684 -15.370  &lt; 2e-16 ***
pirat         5.3704     0.7283   7.374 1.66e-13 ***
afamyes       1.2728     0.1462   8.706  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1744.2  on 2379  degrees of freedom
Residual deviance: 1591.4  on 2377  degrees of freedom
AIC: 1597.4

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>